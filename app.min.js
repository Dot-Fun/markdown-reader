var F=document.querySelector(".app"),G=document.getElementById("editor"),y=document.getElementById("preview"),RJ=document.getElementById("editor-stats"),OJ=document.getElementById("theme-indicator"),HJ=document.getElementById("btn-load-demo"),WJ=document.getElementById("file-input"),GJ=document.getElementById("btn-download"),g=document.getElementById("btn-copy-html"),u=document.getElementById("btn-copy-docs"),LJ=document.getElementById("btn-toggle-theme"),_=document.getElementById("btn-open-settings"),x=document.getElementById("btn-close-settings"),O=document.getElementById("settings-panel"),I=document.getElementById("settings-form"),Fq=document.getElementById("btn-reset-settings"),Nq=document.getElementById("hljs-theme-light"),Dq=document.getElementById("hljs-theme-dark"),B=document.getElementById("settings-preview"),yq=O?O.querySelector("[data-settings-close]"):null,a=[],c=!1,D={THEME:"dotfun-studio-theme",CONTENT:"dotfun-studio-content",BOOKMARK_DISMISSED:"dotfun-studio-bookmark-dismissed",SETTINGS:"dotfun-studio-preview-settings"},Cq=`# dotfun Field Kit

Welcome to the **dotfun markdown studio**, your rapid space for shipping content, creative, and campaign notes in the dotfun house style.

---

## Why dotfun wins

- Human-first, unstoppable support that keeps partners in motion[^human-first]
- Transparent dashes: no smoke, no mirrors, just accountable growth[^transparent]
- We always **run good**, *look good*, and ~~feel average~~ feel good

> “Great marketing is equal parts rigor and play. dotfun keeps both on the table.”
>
> > Nested quotes let you surface creative direction alongside data calls.

## Plays & rituals

1. Run Good — align strategy with measurable revenue lift
2. Look Good — tell the story with thumb-stopping creative
3. Feel Good — nurture teams, founders, and audiences with human energy

- [x] Kickoff brief captured in Notion
- [ ] Post-launch retro scheduled
- Inline autolinks keep collaboration fast: <https://dotfun.co>

## Code snippets & ops

\`\`\`js
const lifecycle = ['Run Good', 'Look Good', 'Feel Good'];

export function dotfunPulse(team) {
  return lifecycle.map(phase => \`\${team} → \${phase}\`);
}
\`\`\`

\`\`\`bash
# Clone the playbook and start locally
git clone https://github.com/dotfunhq/marketing-os.git
cd marketing-os
npm install && npm run dev
\`\`\`

## Palette cheatsheet

| Tone            |   Hex    | Energy                                |
| :-------------- | :------: | ------------------------------------- |
| Run Good Red    | #FF4A2F  | Primary topspin for CTAs + headlines  |
| Neutral Sand    | #F6EEDC  | Background canvas for every story     |
| Accent Ink      | #1C1A15  | High-contrast copy + frames           |
| Highlight Peach | #FFB156  | Warm pops for data points + badges    |

## Media drop

![dotfun collage with gradient lighting](https://dummyimage.com/880x240/120d2e/ffffff&text=dotfun+creative)

---

## Callouts & embeds

<aside>
  <strong>Play nice with partners:</strong> dotfun pairs human energy with automation so every brief ships faster.
</aside>

Footnotes live here:

[^human-first]: dotfun leads with “Human-first, unstoppable support” across its service model.
[^transparent]: dotfun promises “No smoke. No mirrors. Just performance marketing that works.”`,FJ=`
  <h2>Signal cadence</h2>
  <p>
    Tune typography, spacing, and accents to preview exactly how your exports will read.
    <strong>Headlines</strong>, <em>emphasis</em>, and <a href="https://dotfun.co">links</a>
    all respond instantly.
  </p>
  <ul>
    <li><input type="checkbox" checked /> Kickoff brief approved</li>
    <li><input type="checkbox" /> Post-launch retro scheduled</li>
  </ul>
  <blockquote>
    “Keep the preview tight—content should feel premium in every export.”
  </blockquote>
  <pre><code class="language-js">const palette = ['accent', 'muted', 'surface'];
const headline = 'Run Good';
console.log(\`\${headline} → \${palette[0]}\`);</code></pre>
  <table>
    <thead>
      <tr>
        <th>Element</th>
        <th>Role</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Headings</td>
        <td>Frame the narrative arc</td>
      </tr>
      <tr>
        <td>Accent</td>
        <td>Guide the reader’s eye</td>
      </tr>
    </tbody>
  </table>
`,m={sora:"'Sora','Inter',system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif",inter:"'Inter','Sora',system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif",system:"-apple-system,BlinkMacSystemFont,'Segoe UI','Helvetica Neue',sans-serif",lora:"'Lora','Georgia','Times New Roman',serif"},NJ="'IBM Plex Mono','SFMono-Regular',Menlo,monospace",_q={sora:"Sora — dotfun default",inter:"Inter — versatile sans",system:"System UI — platform native",lora:"Lora — editorial serif"},l={sora:m.sora,match:null,lora:"'Lora','Georgia','Times New Roman',serif"},Iq={sora:"Sora Display",match:"Matches body",lora:"Editorial Serif"},i={500:"Medium",600:"Semibold",700:"Bold"},Eq={system(q){return{codeInlineBg:q.inlineBg,codeInlineColor:q.inlineColor,codeBlockBg:q.blockBg,codeBlockBorder:q.blockBorder,codeBadgeBg:q.badgeBg,codeBadgeText:q.badgeText,codeBlockText:q.text,hlKeyword:q.hlKeyword,hlString:q.hlString,hlTitle:q.hlTitle,hlNumber:q.hlNumber,hlComment:q.hlComment,tableBorder:q.tableBorder,tableHeaderBg:q.tableHeaderBg,tableRowEven:q.tableRowEven}},pastel(q){let{accent:J,text:Q,background:X}=q;return{codeInlineBg:U(J,0.18,q.inlineBg),codeInlineColor:Y(J,Q,0.35)||q.inlineColor,codeBlockBg:Y(X,J,0.12)||q.blockBg,codeBlockBorder:U(J,0.32,q.blockBorder),codeBadgeBg:U(J,0.22,q.badgeBg),codeBadgeText:Q,codeBlockText:Q,hlKeyword:J,hlString:Y(J,"#2ca659",0.5)||q.hlString,hlTitle:Y(J,"#9b4dff",0.42)||q.hlTitle,hlNumber:Y(J,"#d97706",0.45)||q.hlNumber,hlComment:Y(Q,X,0.6)||q.hlComment,tableBorder:Y(Q,X,0.82)||q.tableBorder,tableHeaderBg:U(J,0.18,q.tableHeaderBg),tableRowEven:U(J,0.1,q.tableRowEven)}},midnight(q){let{accent:J,text:Q,background:X}=q,Z=Y(X,"#121827",0.6)||"#1b2335",$=Y(J,"#2d1b24",0.4)||"#3a2733",j=Y("#f7f5ff","#e9edf5",0.5)||"#f1f5f9";return{codeInlineBg:U(J,0.22,q.inlineBg),codeInlineColor:Y(J,j,0.5)||j,codeBlockBg:Z,codeBlockBorder:U(Y(J,Z,0.4)||Z,0.6,q.blockBorder),codeBadgeBg:U($,0.65,q.badgeBg),codeBadgeText:j,codeBlockText:j,hlKeyword:Y(J,"#ffd166",0.5)||j,hlString:Y("#8efac6",J,0.35)||j,hlTitle:Y("#c1b4ff",J,0.4)||j,hlNumber:Y("#f9a46c",J,0.4)||j,hlComment:Y(j,Z,0.4)||Y(Q,Z,0.5)||j,tableBorder:U(Y(j,Z,0.55)||Z,0.55,q.tableBorder),tableHeaderBg:U(Y(J,Z,0.3)||Z,0.5,q.tableHeaderBg),tableRowEven:U(Y(J,"#1a1f2d",0.35)||"#1f2432",0.38,q.tableRowEven)}},mint(q){let{accent:J,text:Q,background:X}=q,Z=Y(J,"#00b894",0.4)||J;return{codeInlineBg:U(Z,0.2,q.inlineBg),codeInlineColor:Y(Z,"#064e3b",0.25)||q.inlineColor,codeBlockBg:Y(X,"#e6fffa",0.22)||q.blockBg,codeBlockBorder:U(Z,0.28,q.blockBorder),codeBadgeBg:U(Z,0.24,q.badgeBg),codeBadgeText:Y(Q,"#053d2f",0.6)||q.badgeText,codeBlockText:Y(Q,"#022d20",0.5)||q.text,hlKeyword:Y(Z,"#0ea5e9",0.32)||q.hlKeyword,hlString:Y("#22c55e",Z,0.5)||q.hlString,hlTitle:Y("#6366f1",Z,0.35)||q.hlTitle,hlNumber:Y("#f97316",Z,0.35)||q.hlNumber,hlComment:Y(Q,X,0.62)||q.hlComment,tableBorder:Y(Q,X,0.88)||q.tableBorder,tableHeaderBg:U(Z,0.2,q.tableHeaderBg),tableRowEven:U(Z,0.12,q.tableRowEven)}}},H={fontFamily:"sora",headingFont:"sora",headingWeight:"600",textScale:1,lineHeight:1.75,contentWidth:70,paragraphSpacing:1.1,accentColor:"",backgroundColor:"",textColor:"",codeTheme:"system"},Tq=new Set(Object.keys(m)),wq=new Set(Object.keys(l)),s=new Set(Object.keys(i)),n=new Set(Object.keys(Eq)),z={...H},bq=null,S=null,DJ=320,yJ='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';function f(q,J,Q,X){let Z=Number(q);if(Number.isNaN(Z))return X;return Math.min(Math.max(Z,J),Q)}function E(q){if(!q)return null;let J=q.trim();if(!J)return null;if(J.startsWith("#")){let X=J.slice(1);if(X.length===3){let Z=parseInt(X[0]+X[0],16),$=parseInt(X[1]+X[1],16),j=parseInt(X[2]+X[2],16);if([Z,$,j].some((R)=>Number.isNaN(R)))return null;return{r:Z,g:$,b:j,a:1}}if(X.length===6||X.length===8){let Z=parseInt(X.substring(0,2),16),$=parseInt(X.substring(2,4),16),j=parseInt(X.substring(4,6),16);if([Z,$,j].some((R)=>Number.isNaN(R)))return null;if(X.length===8){let R=parseInt(X.substring(6,8),16);return{r:Z,g:$,b:j,a:Math.round(R/255*1000)/1000}}return{r:Z,g:$,b:j,a:1}}return null}let Q=J.match(/^rgba?\(([^)]+)\)$/i);if(Q){let X=Q[1].split(",").map((W)=>W.trim());if(X.length<3)return null;let Z=Number(X[0]),$=Number(X[1]),j=Number(X[2]);if([Z,$,j].some((W)=>Number.isNaN(W)))return null;let R=X.length>3?Number(X[3]):1;return{r:Math.min(Math.max(Math.round(Z),0),255),g:Math.min(Math.max(Math.round($),0),255),b:Math.min(Math.max(Math.round(j),0),255),a:Number.isNaN(R)?1:Math.min(Math.max(R,0),1)}}return null}function p(q){let J=Math.min(Math.max(q,0),1);if(J===0||J===1)return String(J);return J.toFixed(3).replace(/0+$/,"").replace(/\.$/,"")}function U(q,J,Q){let X=E(q)||(Q?E(Q):null);if(!X)return Q||q;return`rgba(${X.r}, ${X.g}, ${X.b}, ${p(J)})`}function Y(q,J,Q){let X=E(q),Z=E(J);if(!X&&!Z)return null;if(!X)return`rgba(${Z.r}, ${Z.g}, ${Z.b}, ${p(Z.a)})`;if(!Z)return`rgba(${X.r}, ${X.g}, ${X.b}, ${p(X.a)})`;let $=Math.min(Math.max(Q,0),1),j=(W,N)=>Math.round(W+(N-W)*$),R=X.a+(Z.a-X.a)*$;return`rgba(${j(X.r,Z.r)}, ${j(X.g,Z.g)}, ${j(X.b,Z.b)}, ${p(R)})`}function _J(q){return m[q]||m[H.fontFamily]}function IJ(q,J){if(q==="match")return J;return l[q]||l[H.headingFont]||J}function P(q){if(typeof q!=="string")return"";let J=q.trim();return/^#[0-9a-fA-F]{6}$/.test(J)?J.toUpperCase():""}function fJ(q,J){if(!q)return P(J)||"#FF4A2F";let Q=E(q);if(!Q)return P(J)||"#FF4A2F";let X=(Z)=>Z.toString(16).padStart(2,"0");return`#${X(Q.r)}${X(Q.g)}${X(Q.b)}`.toUpperCase()}function fq(q,J=2){let Q=Number(q);if(Number.isNaN(Q))return"";return Q.toFixed(J).replace(/\.?0+$/,"")}function M(q,J,Q){let X=q.getPropertyValue(J);if(X&&X.trim())return X.trim();return Q}function PJ(q){switch(q){case"fontFamily":return _q[z.fontFamily]||_q[H.fontFamily];case"headingFont":return Iq[z.headingFont]||Iq[H.headingFont];case"headingWeight":return i[z.headingWeight]||i[H.headingWeight];case"textScale":return`${Math.round(z.textScale*100)}%`;case"lineHeight":return fq(z.lineHeight,2);case"contentWidth":return`${Math.round(z.contentWidth)} ch`;case"paragraphSpacing":return`${fq(z.paragraphSpacing,2)} rem`;default:return""}}function hq(){return bq}function BJ({textColor:q,borderColor:J,accentColor:Q}){let X=q&&q.trim()?q.trim():"#4b4237",Z=J&&J.trim()?J.trim():"rgba(28, 26, 21, 0.14)",$=Q&&Q.trim()?Q.trim():"#ff4a2f";return`
<p class="export-attribution" style="margin-top:2.5rem;padding-top:1.5rem;font-size:0.92rem;color:${X};border-top:1px solid ${Z};">Built with <a href="https://dotfun.co/tools/markdown-studio" target="_blank" rel="noopener" style="font-weight:600;text-decoration:none;color:${$};">dotfun Markdown Studio</a>.</p>`}function o(q){if(!F)return null;let J=getComputedStyle(F),X=(F.dataset.theme||"light").toLowerCase()==="dark",Z=M(J,"--accent","#FF4A2F"),$=M(J,"--text","#1C1A15"),j=M(J,"--surface","#FFF8EB"),R=M(J,"--surface-alt",j),W=M(J,"--muted","rgba(28, 26, 21, 0.68)"),N=M(J,"--accent-soft",U(Z,0.14)),b=M(J,"--preview-accent-shadow",U(Z,X?0.28:0.25)),Jq=M(J,"--code-inline-bg","rgba(31, 36, 48, 0.1)"),Qq=M(J,"--code-inline-color","#0C7C3F"),Xq=M(J,"--code-block-bg","#EEF2FF"),Zq=M(J,"--code-block-border","rgba(39, 94, 254, 0.16)"),$q=M(J,"--code-badge-bg","rgba(39, 94, 254, 0.12)"),jq=M(J,"--code-badge-text",$),zq=M(J,"--hljs-keyword",Z),Yq=M(J,"--hljs-string","#2CA659"),Kq=M(J,"--hljs-title","#9B4DFF"),Uq=M(J,"--hljs-number","#D97706"),Mq=M(J,"--hljs-comment",Y($,j,0.55)||$),Rq=M(J,"--table-border",U(Y($,j,0.8)||$,X?0.32:0.24)),Oq=M(J,"--table-header-bg",U(Z,X?0.18:0.12)),Hq=M(J,"--table-row-even",U(Z,X?0.16:0.08)),Wq=M(J,"--preview-checkbox-border",X?"rgba(255, 224, 196, 0.6)":"rgba(28, 26, 21, 0.5)"),kq=M(J,"--font-mono",NJ),h=q.accentColor||Z,A=q.textColor||$,V=q.backgroundColor||j,Gq=R;if(q.backgroundColor)Gq=Y(V,X?"#ffffff":"#000000",X?0.12:0.08)||R;let gq=U(h,X?0.24:0.16,N),cq=U(h,X?0.32:0.25,b),lq=q.textColor||q.backgroundColor?Y(A,V,X?0.72:0.38)||W:W,iq={accent:h,text:A,background:V,inlineBg:Jq,inlineColor:Qq,blockBg:Xq,blockBorder:Zq,badgeBg:$q,badgeText:jq,hlKeyword:zq,hlString:Yq,hlTitle:Kq,hlNumber:Uq,hlComment:Mq,tableBorder:Rq,tableHeaderBg:Oq,tableRowEven:Hq},rq=n.has(q.codeTheme)?q.codeTheme:H.codeTheme,L=Eq[rq](iq)||{},aq=L.tableBorder||Rq,sq=L.tableHeaderBg||Oq,nq=L.tableRowEven||Hq,oq=L.codeInlineBg||Jq,tq=L.codeInlineColor||Qq,eq=L.codeBlockBg||Xq,qJ=L.codeBlockBorder||Zq,JJ=L.codeBadgeBg||$q,QJ=L.codeBadgeText||jq,XJ=L.codeBlockText||A,ZJ=L.hlKeyword||zq,$J=L.hlString||Yq,jJ=L.hlTitle||Kq,zJ=L.hlNumber||Uq,YJ=L.hlComment||Mq,KJ=U(Y(A,V,X?0.68:0.42)||A,X?0.68:0.5,Wq)||Wq,Lq=_J(q.fontFamily),UJ=IJ(q.headingFont,Lq),MJ=s.has(String(q.headingWeight))?String(q.headingWeight):H.headingWeight;return{fontSans:Lq,headingFont:UJ,headingWeight:MJ,monoFont:kq,fontScale:q.textScale,lineHeight:q.lineHeight,paragraphSpacing:`${q.paragraphSpacing}rem`,contentWidth:`${q.contentWidth}ch`,accent:h,accentSoft:gq,accentShadow:cq,text:A,muted:lq,background:V,surfaceAlt:Gq,tableBorder:aq,tableHeaderBg:sq,tableRowEven:nq,codeInlineBg:oq,codeInlineColor:tq,codeBlockBg:eq,codeBlockBorder:qJ,codeBadgeBg:JJ,codeBadgeText:QJ,codeBlockText:XJ,hlKeyword:ZJ,hlString:$J,hlTitle:jJ,hlNumber:zJ,hlComment:YJ,checkboxBorder:KJ}}function K(q,J){let Q=[];if(F)Q.push(F);if(O)Q.push(O);if(Q.length===0)return;Q.forEach((X)=>{if(!X)return;if(J===void 0||J===null||J==="")X.style.removeProperty(q);else X.style.setProperty(q,J)})}function T(q=z){let J=o(q);if(!J)return;bq=J,K("--preview-font-sans",J.fontSans),K("--preview-heading-font",J.headingFont),K("--preview-heading-weight",J.headingWeight),K("--preview-font-scale",String(J.fontScale)),K("--preview-line-height",String(J.lineHeight)),K("--preview-paragraph-spacing",J.paragraphSpacing),K("--preview-content-width",J.contentWidth),K("--preview-text",J.text),K("--preview-muted",J.muted),K("--preview-surface",J.background),K("--preview-surface-alt",J.surfaceAlt),K("--preview-accent",J.accent),K("--preview-accent-soft",J.accentSoft),K("--preview-accent-shadow",J.accentShadow),K("--preview-code-inline-bg",J.codeInlineBg),K("--preview-code-inline-color",J.codeInlineColor),K("--preview-code-block-bg",J.codeBlockBg),K("--preview-code-block-border",J.codeBlockBorder),K("--preview-code-badge-bg",J.codeBadgeBg),K("--preview-code-badge-text",J.codeBadgeText),K("--preview-code-block-text",J.codeBlockText),K("--preview-table-border",J.tableBorder),K("--preview-table-header-bg",J.tableHeaderBg),K("--preview-table-row-even",J.tableRowEven),K("--preview-hljs-keyword",J.hlKeyword),K("--preview-hljs-string",J.hlString),K("--preview-hljs-title",J.hlTitle),K("--preview-hljs-number",J.hlNumber),K("--preview-hljs-comment",J.hlComment),K("--preview-checkbox-border",J.checkboxBorder),d(),uq()}function t(){try{localStorage.setItem(D.SETTINGS,JSON.stringify(z))}catch(q){console.warn("Unable to persist preview settings:",q)}}function AJ(){let q=null;try{let Q=localStorage.getItem(D.SETTINGS);if(Q)q=JSON.parse(Q)}catch(Q){console.warn("Unable to read preview settings:",Q)}let J=q&&typeof q==="object"?{...H,...q}:{...H};if(!Tq.has(J.fontFamily))J.fontFamily=H.fontFamily;if(!wq.has(J.headingFont))J.headingFont=H.headingFont;if(!s.has(String(J.headingWeight)))J.headingWeight=H.headingWeight;else J.headingWeight=String(J.headingWeight);if(!n.has(J.codeTheme))J.codeTheme=H.codeTheme;J.textScale=f(J.textScale,0.9,1.2,H.textScale),J.lineHeight=Math.round(f(J.lineHeight,1.4,2,H.lineHeight)*100)/100,J.contentWidth=Math.round(f(J.contentWidth,60,90,H.contentWidth)),J.paragraphSpacing=Math.round(f(J.paragraphSpacing,0.8,1.6,H.paragraphSpacing)*100)/100,J.accentColor=P(J.accentColor),J.backgroundColor=P(J.backgroundColor),J.textColor=P(J.textColor),z=J}function d(){if(!I)return;I.querySelectorAll("[data-display-for]").forEach((J)=>{let Q=J.getAttribute("data-display-for");if(!Q)return;let X=PJ(Q);if(X)J.textContent=X})}function w(q=!1){if(!B)return;if(!q&&O&&O.hidden)return;B.innerHTML=FJ.trim(),B.scrollTop=0,B.querySelectorAll("pre code").forEach((Q)=>{hljs.highlightElement(Q),mq(Q)})}function uq(){w()}function Pq(q){let J=q.target;if(!(J instanceof HTMLInputElement)||J.type!=="checkbox")return;if(q.type==="keydown"&&![" ","Spacebar","Enter"].includes(q.key))return;q.preventDefault()}function e(){if(!I)return;let q=hq()||o(z);I.querySelectorAll("[data-setting]").forEach((Q)=>{let X=Q.getAttribute("data-setting");if(!X||!(X in z))return;let Z=z[X];if(Q instanceof HTMLInputElement)if(Q.type==="range"||Q.type==="number")Q.value=String(Z);else if(Q.type==="color"){let $="#FF4A2F";if(q){if(X==="accentColor")$=q.accent;if(X==="backgroundColor")$=q.background;if(X==="textColor")$=q.text}Q.value=fJ(Z||$,$)}else Q.value=String(Z);else if(Q instanceof HTMLSelectElement)Q.value=String(Z)}),d()}function VJ(q,J){switch(q){case"fontFamily":if(!Tq.has(J))return!1;if(z.fontFamily===J)return!1;return z.fontFamily=J,!0;case"headingFont":if(!wq.has(J))return!1;if(z.headingFont===J)return!1;return z.headingFont=J,!0;case"headingWeight":{let Q=String(J);if(!s.has(Q)||z.headingWeight===Q)return!1;return z.headingWeight=Q,!0}case"codeTheme":if(!n.has(J)||z.codeTheme===J)return!1;return z.codeTheme=J,!0;case"textScale":{let Q=f(J,0.9,1.2,z.textScale);if(z.textScale===Q)return!1;return z.textScale=Q,!0}case"lineHeight":{let Q=Math.round(f(J,1.4,2,z.lineHeight)*100)/100;if(z.lineHeight===Q)return!1;return z.lineHeight=Q,!0}case"contentWidth":{let Q=Math.round(f(J,60,90,z.contentWidth));if(z.contentWidth===Q)return!1;return z.contentWidth=Q,!0}case"paragraphSpacing":{let Q=Math.round(f(J,0.8,1.6,z.paragraphSpacing)*100)/100;if(z.paragraphSpacing===Q)return!1;return z.paragraphSpacing=Q,!0}case"accentColor":{let Q=P(J);if(z.accentColor===Q)return!1;return z.accentColor=Q,!0}case"backgroundColor":{let Q=P(J);if(z.backgroundColor===Q)return!1;return z.backgroundColor=Q,!0}case"textColor":{let Q=P(J);if(z.textColor===Q)return!1;return z.textColor=Q,!0}default:return!1}}function Bq(q){let J=q.target;if(!(J instanceof HTMLInputElement)&&!(J instanceof HTMLSelectElement))return;let Q=J.dataset.setting;if(!Q||!(Q in z))return;let X=J.type==="color"?J.value:J.value;if(!VJ(Q,X)){d();return}t(),T(z),d()}function CJ(q){if(!(q in z))return;z[q]=H[q],t(),T(z),e(),w(!0)}function EJ(){z={...H},t(),T(z),e(),w(!0)}function vq(q){if(!O||O.hidden)return;if(q.key==="Escape"){q.preventDefault(),r();return}if(q.key!=="Tab")return;let J=O.querySelectorAll(yJ);if(!J.length)return;let Q=Array.from(J).filter((j)=>!j.hasAttribute("disabled"));if(!Q.length)return;let X=Q[0],Z=Q[Q.length-1],$=document.activeElement;if(q.shiftKey){if($===X||!O.contains($))q.preventDefault(),Z.focus();return}if($===Z)q.preventDefault(),X.focus()}function TJ(){if(!O)return;if(!O.hidden&&O.classList.contains("is-visible"))return;if(e(),w(!0),S=document.activeElement instanceof HTMLElement?document.activeElement:null,O.hidden=!1,requestAnimationFrame(()=>{O.classList.add("is-visible")}),document.body.classList.add("is-settings-open"),_)_.setAttribute("aria-expanded","true");document.addEventListener("keydown",vq);let q=O.querySelector("[data-setting]"),J=q instanceof HTMLElement?q:x instanceof HTMLElement?x:null;if(J)setTimeout(()=>J.focus(),30)}function r(){if(!O||O.hidden)return;if(O.classList.remove("is-visible"),document.body.classList.remove("is-settings-open"),_)_.setAttribute("aria-expanded","false");if(document.removeEventListener("keydown",vq),setTimeout(()=>{if(!O.classList.contains("is-visible"))O.hidden=!0},DJ),S&&typeof S.focus==="function")S.focus()}function wJ(){if(_)_.setAttribute("aria-haspopup","dialog"),_.setAttribute("aria-expanded","false"),_.addEventListener("click",TJ);if(x)x.addEventListener("click",r);if(yq)yq.addEventListener("click",r);if(I)I.addEventListener("input",Bq),I.addEventListener("change",Bq),I.querySelectorAll("[data-settings-reset]").forEach((J)=>{J.addEventListener("click",()=>{let Q=J.getAttribute("data-settings-reset");if(!Q)return;CJ(Q)})});if(Fq)Fq.addEventListener("click",EJ);if(w(!0),B)B.addEventListener("click",Pq),B.addEventListener("keydown",Pq)}function bJ(q,J="fragment"){let Q=q.fontScale||1,X=[],Z=J==="document";if(Z)X.push(`body { margin: 0; padding: 0; font-family: ${q.fontSans}; color: ${q.text}; line-height: ${q.lineHeight}; }`);let $=Z?"":`  background: ${q.background};
`;return X.push(`.dotfun-markdown {
  font-family: ${q.fontSans};
  color: ${q.text};
${$}  line-height: ${q.lineHeight};
  letter-spacing: 0.01em;
  max-width: ${q.contentWidth};
  margin: 0 auto;
  padding: 0;
}
.dotfun-markdown > *:first-child {
  margin-top: 0;
}
.dotfun-markdown > * {
  max-width: ${q.contentWidth};
  margin-left: auto;
  margin-right: auto;
}
.dotfun-markdown h1,
.dotfun-markdown h2,
.dotfun-markdown h3,
.dotfun-markdown h4,
.dotfun-markdown h5,
.dotfun-markdown h6 {
  font-family: ${q.headingFont};
  font-weight: ${q.headingWeight};
  line-height: 1.2;
  margin: calc(2rem * ${Q}) 0 calc(1rem * ${Q});
}
.dotfun-markdown h1 {
  font-size: calc(clamp(2rem, 4vw, 2.6rem) * ${Q});
  letter-spacing: -0.012em;
}
.dotfun-markdown h2 {
  font-size: calc(clamp(1.7rem, 3.4vw, 2.2rem) * ${Q});
}
.dotfun-markdown h3 {
  font-size: calc(clamp(1.4rem, 2.8vw, 1.8rem) * ${Q});
}
.dotfun-markdown p,
.dotfun-markdown ul,
.dotfun-markdown ol {
  font-size: calc(1.05rem * ${Q});
}
.dotfun-markdown p {
  margin: calc(${q.paragraphSpacing} * ${Q}) 0;
}
.dotfun-markdown ul,
.dotfun-markdown ol {
  margin: calc(1.2rem * ${Q}) 0 calc(1.2rem * ${Q}) 1.6rem;
  padding-left: 1.2rem;
}
.dotfun-markdown blockquote {
  margin: calc(1.8rem * ${Q}) 0;
  padding: 1rem 1.5rem;
  border-left: 4px solid ${q.accent};
  background: ${q.accentSoft};
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.12);
  font-style: italic;
}
.dotfun-markdown blockquote p {
  margin: 0;
}
.dotfun-markdown input[type='checkbox'] {
  appearance: none;
  width: 18px;
  height: 18px;
  margin-right: 0.6rem;
  border: 2px solid ${q.checkboxBorder};
  border-radius: 6px;
  display: inline-grid;
  place-content: center;
  vertical-align: middle;
  background: ${q.background};
  transition: background-color 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;
  cursor: pointer;
}
.dotfun-markdown input[type='checkbox']:hover {
  border-color: ${q.accent};
}
.dotfun-markdown input[type='checkbox']:checked {
  background: ${q.accent};
  border-color: ${q.accent};
  box-shadow: 0 6px 14px ${q.accentShadow};
}
.dotfun-markdown input[type='checkbox']:checked::after {
  content: '✓';
  color: #fffdf8;
  font-size: 0.7rem;
  font-weight: 700;
}
.dotfun-markdown code {
  font-family: ${q.monoFont};
  font-size: calc(0.95rem * ${Q});
  background: ${q.codeInlineBg};
  color: ${q.codeInlineColor};
  padding: 0.2em 0.45em;
  border-radius: 6px;
}
.dotfun-markdown pre {
  margin: calc(1.8rem * ${Q}) 0;
  padding: 1.5rem;
  padding-top: 2.6rem;
  background: ${q.codeBlockBg};
  border: 1px solid ${q.codeBlockBorder};
  border-radius: 16px;
  overflow-x: auto;
  font-family: ${q.monoFont};
  font-size: calc(0.95rem * ${Q});
  line-height: 1.6;
  position: relative;
}
.dotfun-markdown pre code {
  background: none;
  padding: 0;
  display: block;
}
.dotfun-markdown pre[data-lang]::before {
  content: attr(data-lang);
  position: absolute;
  top: 0.75rem;
  right: 1rem;
  padding: 0.3rem 0.75rem;
  font-size: 0.75rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  border-radius: 999px;
  background: ${q.codeBadgeBg};
  color: ${q.codeBadgeText};
  font-family: ${q.headingFont};
}
.dotfun-markdown pre code.hljs {
  color: ${q.codeBlockText};
}
.dotfun-markdown .hljs-comment,
.dotfun-markdown .hljs-quote {
  color: ${q.hlComment};
  font-style: italic;
}
.dotfun-markdown .hljs-keyword,
.dotfun-markdown .hljs-selector-tag,
.dotfun-markdown .hljs-literal,
.dotfun-markdown .hljs-section,
.dotfun-markdown .hljs-link {
  color: ${q.hlKeyword};
  font-weight: 600;
}
.dotfun-markdown .hljs-string,
.dotfun-markdown .hljs-template-variable,
.dotfun-markdown .hljs-addition {
  color: ${q.hlString};
}
.dotfun-markdown .hljs-number,
.dotfun-markdown .hljs-attr,
.dotfun-markdown .hljs-attribute,
.dotfun-markdown .hljs-symbol,
.dotfun-markdown .hljs-built_in,
.dotfun-markdown .hljs-bullet {
  color: ${q.hlNumber};
}
.dotfun-markdown .hljs-title,
.dotfun-markdown .hljs-name,
.dotfun-markdown .hljs-type,
.dotfun-markdown .hljs-selector-id,
.dotfun-markdown .hljs-selector-class,
.dotfun-markdown .hljs-meta,
.dotfun-markdown .hljs-doctag,
.dotfun-markdown .hljs-template-tag {
  color: ${q.hlTitle};
}
.dotfun-markdown a {
  color: ${q.accent};
  text-decoration: none;
  font-weight: 600;
}
.dotfun-markdown a:hover,
.dotfun-markdown a:focus {
  text-decoration: underline;
}
.dotfun-markdown .footnote-ref {
  font-size: 0.75em;
  vertical-align: super;
}
.dotfun-markdown .footnote-ref a,
.dotfun-markdown .footnote-backref {
  color: ${q.accent};
  text-decoration: none;
  font-weight: 600;
}
.dotfun-markdown .footnote-backref:hover,
.dotfun-markdown .footnote-ref a:hover {
  text-decoration: underline;
}
.dotfun-markdown .footnotes {
  margin-top: 2.5rem;
  font-size: 0.9rem;
  color: ${q.muted};
}
.dotfun-markdown .footnotes hr {
  border: none;
  border-top: 1px solid ${q.tableBorder};
  margin-bottom: 1.5rem;
}
.dotfun-markdown .footnotes ol {
  margin: 0;
  padding-left: 1.5rem;
  display: grid;
  gap: 0.75rem;
}
.dotfun-markdown table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  margin: calc(1.5rem * ${Q}) 0;
  font-size: calc(0.95rem * ${Q});
  border: 1px solid ${q.tableBorder};
  border-radius: 16px;
  overflow: hidden;
  background: ${q.background};
}
.dotfun-markdown th,
.dotfun-markdown td {
  padding: 0.75rem 1rem;
  text-align: left;
  border-right: 1px solid ${q.tableBorder};
  border-bottom: 1px solid ${q.tableBorder};
}
.dotfun-markdown th:last-child,
.dotfun-markdown td:last-child {
  border-right: none;
}
.dotfun-markdown tbody tr:last-child td {
  border-bottom: none;
}
.dotfun-markdown table thead {
  background: ${q.tableHeaderBg};
}
.dotfun-markdown table tbody tr:nth-child(even) {
  background: ${q.tableRowEven};
}
.dotfun-markdown img {
  max-width: 100%;
  border-radius: 16px;
  box-shadow: 0 12px 24px rgba(0, 0, 0, 0.12);
}
.dotfun-markdown .export-attribution {
  margin-top: calc(2.5rem * ${Q});
  padding-top: 1.5rem;
  border-top: 1px solid ${q.tableBorder};
  font-size: 0.92rem;
  color: ${q.muted};
}
.dotfun-markdown .export-attribution a {
  color: ${q.accent};
  font-weight: 600;
  text-decoration: none;
}
.dotfun-markdown .export-attribution a:hover {
  text-decoration: underline;
}`),X.join(`

`)}function Sq(q="fragment"){let J=hq()||o(z);if(!J)return{htmlFragment:y.innerHTML,docHtml:y.innerHTML,plainText:y.textContent||"",tokens:null};let Q=y.cloneNode(!0);Q.removeAttribute("id");let X=document.createElement("section");X.className="dotfun-markdown",X.dataset.theme=F.dataset.theme||"light",X.innerHTML=Q.innerHTML;let Z=BJ({textColor:J.muted,borderColor:J.tableBorder,accentColor:J.accent});X.insertAdjacentHTML("beforeend",Z);let $=bJ(J,q),j=`<style>${$}</style>${X.outerHTML}`,R=`<!DOCTYPE html><html><head><meta charset="utf-8"><style>${$}</style></head><body>${X.outerHTML}</body></html>`,W=X.textContent||"";return{tokens:J,css:$,htmlFragment:j,docHtml:R,plainText:W}}async function hJ(){let q=Sq("fragment");await navigator.clipboard.writeText(q.htmlFragment)}marked.setOptions({gfm:!0,breaks:!0,highlight(q,J){if(J&&hljs.getLanguage(J))return hljs.highlight(q,{language:J}).value;return hljs.highlightAuto(q).value}});function uJ(q){let J=q.split(/\r?\n/),Q=[],X=[],Z=0;while(Z<J.length){let $=J[Z],j=$.match(/^\[\^([^\]]+)\]:\s?(.*)$/);if(j){let R=j[1],W=j[2]||"";Z+=1;while(Z<J.length){let N=J[Z];if(/^( {2,}|\t)/.test(N)){W+=`
`+N.replace(/^(?: {2,4}|\t)/,""),Z+=1;continue}if(N.trim()===""){let b=J[Z+1];if(b&&/^( {2,}|\t)/.test(b)){W+=`
`,Z+=1;continue}Z+=1}break}X.push({id:R,content:W.trim()});continue}Q.push($),Z+=1}if(!X.length)return{body:q,footnotes:[]};return{body:Q.join(`
`),footnotes:X}}function vJ(q){let{body:J,footnotes:Q}=uJ(q);if(!Q.length)return{markdown:q,footnotes:[]};let X=new Map;return Q.forEach(($,j)=>{X.set($.id,j+1)}),{markdown:J.replace(/\[\^([^\]]+)\]/g,($,j)=>{let R=X.get(j);if(!R)return $;return`<sup id="fnref-${j}" class="footnote-ref"><a href="#fn-${j}">${R}</a></sup>`}),footnotes:Q.map(($,j)=>({...$,number:j+1}))}}function SJ(q){if(!q.length)return"";return`<section class="footnotes" aria-label="Footnotes"><hr /><ol>${q.map((Q)=>{let X=document.createElement("div");X.innerHTML=marked.parse(Q.content).trim();let Z=X.querySelectorAll("p"),$=` <a href="#fnref-${Q.id}" class="footnote-backref" aria-label="Back to content">↩︎</a>`;if(Z.length)Z[Z.length-1].insertAdjacentHTML("beforeend",$);else X.insertAdjacentHTML("beforeend",`<p>${$.trim()}</p>`);return`<li id="fn-${Q.id}"><div class="footnote-content">${X.innerHTML}</div></li>`}).join("")}</ol></section>`}function pJ(q){let J=/^(\s*[-*+]\s+|\s*\d+\.\s+)\[( |x|X)\].*$/gm,Q=[],X;while((X=J.exec(q))!==null)Q.push({start:X.index,end:J.lastIndex,text:X[0],checked:X[2].toLowerCase()==="x"});return Q}function xJ(){y.querySelectorAll('li input[type="checkbox"]').forEach((J,Q)=>{let X=a[Q];if(J.removeAttribute("disabled"),!X)return;J.dataset.taskIndex=String(Q),J.checked=X.checked})}function pq(q){a=pJ(q);let{markdown:J,footnotes:Q}=vJ(q),X=marked.parse(J),Z=SJ(Q),$=DOMPurify.sanitize(X+Z);y.innerHTML=$,xJ(),y.querySelectorAll("pre code").forEach((j)=>{hljs.highlightElement(j),mq(j)}),uq()}function xq(q){let Q=q.replace(/[`*_#>\-]/g," ").split(/\s+/).filter(Boolean).length;RJ.textContent=Q===1?"1 word":`${Q} words`}function mJ(q){try{localStorage.setItem(D.CONTENT,q)}catch(J){console.warn("Unable to persist markdown content:",J)}}function dJ(){let q=Cq;try{let J=localStorage.getItem(D.CONTENT);if(J)q=J}catch(J){console.warn("Unable to read saved markdown:",J)}G.value=q,pq(q),xq(q)}function qq(q){let J=q==="dark"?"dark":"light";F.dataset.theme=J,document.body.dataset.theme=J,OJ.textContent=J==="dark"?"Dark":"Light";try{localStorage.setItem(D.THEME,J)}catch(Q){console.warn("Unable to persist theme preference:",Q)}T(z),kJ(J)}function kJ(q){let J=q==="dark";if(Nq)Nq.disabled=J;if(Dq)Dq.disabled=!J}function gJ(q){if(!q)return"Code";return q.replace(/language-/i,"").replace(/[\W_]+/g," ").trim().replace(/\b\w/g,(J)=>J.toUpperCase())}function mq(q){let J=q.closest("pre");if(!J)return;let X=Array.from(q.classList).find(($)=>$.startsWith("language-"))||q.getAttribute("data-language")||q.result&&q.result.language&&`language-${q.result.language}`,Z=gJ(X);J.dataset.lang=Z}function cJ(q,J){let Q=a[q];if(!Q)return;let X=G.value,Z=X.slice(0,Q.start),$=X.slice(Q.end),j=Q.text.replace(/\[( |x|X)\]/,J?"[x]":"[ ]"),R=Z+j+$,W=G.selectionStart,N=G.selectionEnd;c=!0,G.value=R,G.setSelectionRange(W,N),G.dispatchEvent(new Event("input")),c=!1}async function lJ(){let q=Sq("document");if(navigator.clipboard&&typeof navigator.clipboard.write==="function"&&typeof ClipboardItem!=="undefined"){let J=new Blob([q.docHtml],{type:"text/html"}),Q=new Blob([q.plainText],{type:"text/plain"});await navigator.clipboard.write([new ClipboardItem({"text/html":J,"text/plain":Q})]);return}await navigator.clipboard.writeText(q.plainText)}function iJ(){let q="light";try{let J=localStorage.getItem(D.THEME);if(J)q=J;else if(window.matchMedia("(prefers-color-scheme: dark)").matches)q="dark"}catch(J){console.warn("Unable to read stored theme:",J)}qq(q)}G.addEventListener("input",(q)=>{let J=q.target.value;if(pq(J),xq(J),!c)mJ(J)});HJ.addEventListener("click",()=>{G.value=Cq,G.dispatchEvent(new Event("input")),G.focus()});LJ.addEventListener("click",()=>{let q=F.dataset.theme==="dark"?"light":"dark";qq(q)});WJ.addEventListener("change",(q)=>{let[J]=q.target.files;if(!J)return;let Q=new FileReader;Q.onload=(X)=>{let Z=String(X.target.result);G.value=Z,G.dispatchEvent(new Event("input"))},Q.readAsText(J),q.target.value=""});GJ.addEventListener("click",()=>{let q=new Blob([G.value],{type:"text/markdown"}),J=URL.createObjectURL(q),Q=document.createElement("a"),X=new Date().toISOString().replace(/[:.]/g,"-");Q.href=J,Q.download=`dotfun-studio-${X}.md`,document.body.appendChild(Q),Q.click(),document.body.removeChild(Q),URL.revokeObjectURL(J)});g.addEventListener("click",async()=>{try{await hJ(),k(g,"Copied!")}catch(q){console.error("Clipboard copy failed",q),k(g,"Copy failed")}});if(u)u.addEventListener("click",async()=>{try{await lJ(),k(u,"Copied!")}catch(q){console.error("Docs copy failed",q),k(u,"Copy failed")}});y.addEventListener("change",(q)=>{let J=q.target;if(!(J instanceof HTMLInputElement)||J.type!=="checkbox")return;let Q=Number(J.dataset.taskIndex??"-1");if(Number.isNaN(Q)||Q<0)return;cJ(Q,J.checked)});function k(q,J){let Q=q.textContent;q.textContent=J,q.classList.add("is-active"),setTimeout(()=>{q.textContent=Q,q.classList.remove("is-active")},1400)}AJ();iJ();T(z);dJ();wJ();var v=window.matchMedia("(prefers-color-scheme: dark)"),Aq=(q)=>{if(!localStorage.getItem(D.THEME))qq(q.matches?"dark":"light")};if(typeof v.addEventListener==="function")v.addEventListener("change",Aq);else if(typeof v.addListener==="function")v.addListener(Aq);["dragenter","dragover"].forEach((q)=>{document.addEventListener(q,(J)=>{if(!J.dataTransfer)return;if(Array.from(J.dataTransfer.types).includes("Files"))J.preventDefault(),F.classList.add("is-dragging")})});["dragleave","drop","dragend"].forEach((q)=>{document.addEventListener(q,(J)=>{if(J.type==="drop")J.preventDefault(),rJ(J);F.classList.remove("is-dragging")})});function rJ(q){let J=Array.from(q.dataTransfer.files).filter((X)=>/\.(md|markdown|txt)$/i.test(X.name));if(!J.length)return;let Q=new FileReader;Q.onload=(X)=>{let Z=String(X.target.result);G.value=Z,G.dispatchEvent(new Event("input"))},Q.readAsText(J[0])}var dq=document.createElement("style");dq.textContent=`
  .app.is-dragging::after {
    content: 'Drop markdown file to import';
    position: fixed;
    inset: min(20vh, 120px) 10vw;
    border-radius: 24px;
    background: rgba(39, 94, 254, 0.1);
    border: 2px dashed rgba(39, 94, 254, 0.4);
    color: var(--accent);
    font-family: var(--font-sans);
    font-size: clamp(1.4rem, 3vw, 2rem);
    display: grid;
    place-items: center;
    pointer-events: none;
    z-index: 50;
    box-shadow: 0 20px 40px rgba(39, 94, 254, 0.12);
    backdrop-filter: blur(10px);
  }
`;document.head.appendChild(dq);var C=document.getElementById("bookmark-callout"),Vq=document.getElementById("dismiss-bookmark"),aJ=0;function sJ(){try{if(localStorage.getItem(D.BOOKMARK_DISMISSED)==="true")return}catch(q){console.warn("Unable to check bookmark toast state:",q)}setTimeout(()=>{if(C)C.classList.add("is-visible")},aJ)}function nJ(){if(!C)return;C.classList.remove("is-visible");try{localStorage.setItem(D.BOOKMARK_DISMISSED,"true")}catch(q){console.warn("Unable to save bookmark toast state:",q)}setTimeout(()=>{C.classList.add("is-hidden")},400)}if(Vq)Vq.addEventListener("click",nJ);sJ();
