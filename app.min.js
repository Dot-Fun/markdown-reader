var w=document.querySelector(".app"),P=document.getElementById("editor"),h=document.getElementById("preview"),fG=document.getElementById("editor-stats"),CG=document.getElementById("theme-indicator"),BG=document.getElementById("btn-load-demo"),VG=document.getElementById("file-input"),wG=document.getElementById("btn-download"),Uq=document.getElementById("btn-copy-html"),l=document.getElementById("btn-share"),t=document.getElementById("btn-copy-docs"),DG=document.getElementById("btn-toggle-theme"),b=document.getElementById("btn-open-settings"),Oq=document.getElementById("btn-close-settings"),N=document.getElementById("settings-panel"),g=document.getElementById("settings-form"),fq=document.getElementById("btn-reset-settings"),Cq=document.getElementById("hljs-theme-light"),Bq=document.getElementById("hljs-theme-dark"),u=document.getElementById("settings-preview"),Vq=N?N.querySelector("[data-settings-close]"):null,Wq=[],Mq=!1,v={THEME:"dotfun-studio-theme",CONTENT:"dotfun-studio-content",BOOKMARK_DISMISSED:"dotfun-studio-bookmark-dismissed",SETTINGS:"dotfun-studio-preview-settings"},Kq="share",mq=1,Qq=vG();function vG(){try{if(typeof globalThis==="undefined"||!("localStorage"in globalThis))return null;let q=globalThis.localStorage,G="__dotfun-storage-test__";return q.setItem(G,"1"),q.removeItem(G),q}catch(q){return null}}function $q(q,G,{serialize:J=(Q)=>Q,onErrorMessage:O}={}){if(!Qq)return!1;try{return Qq.setItem(q,J(G)),!0}catch(Q){if(O)console.warn(`${O}:`,Q);else console.warn(`Unable to persist ${q}:`,Q);return!1}}function c(q,{parse:G=(Q)=>Q,fallback:J=null,onErrorMessage:O}={}){if(!Qq)return J;try{let Q=Qq.getItem(q);if(Q===null||Q===void 0)return J;return G(Q)}catch(Q){if(O)console.warn(`${O}:`,Q);else console.warn(`Unable to read ${q}:`,Q);return J}}var uq=pG(),Xq=null,Lq=!1;function pG(){let G={};function J(j,L){if(!G[j]){G[j]={};for(let R=0;R<j.length;R+=1)G[j][j.charAt(R)]=R}return G[j][L]}function O(j,L,R){if(j==null)return"";let U,K,y={},I={},f="",p="",W="",H=2,S=3,A=2,M=[],_=0,X=0;for(let D=0;D<j.length;D+=1){if(f=j.charAt(D),!Object.prototype.hasOwnProperty.call(y,f))y[f]=S++,I[f]=!0;if(p=W+f,Object.prototype.hasOwnProperty.call(y,p)){W=p;continue}if(Object.prototype.hasOwnProperty.call(I,W)){if(W.charCodeAt(0)<256){for(U=0;U<A;U+=1)if(_<<=1,X===L-1)X=0,M.push(R(_)),_=0;else X+=1;K=W.charCodeAt(0);for(U=0;U<8;U+=1){if(_=_<<1|K&1,X===L-1)X=0,M.push(R(_)),_=0;else X+=1;K>>=1}}else{K=1;for(U=0;U<A;U+=1){if(_=_<<1|K,X===L-1)X=0,M.push(R(_)),_=0;else X+=1;K=0}K=W.charCodeAt(0);for(U=0;U<16;U+=1){if(_=_<<1|K&1,X===L-1)X=0,M.push(R(_)),_=0;else X+=1;K>>=1}}if(H-=1,H===0)H=Math.pow(2,A),A+=1;delete I[W]}else{K=y[W];for(U=0;U<A;U+=1){if(_=_<<1|K&1,X===L-1)X=0,M.push(R(_)),_=0;else X+=1;K>>=1}}if(H-=1,H===0)H=Math.pow(2,A),A+=1;y[p]=S++,W=String(f)}if(W!==""){if(Object.prototype.hasOwnProperty.call(I,W)){if(W.charCodeAt(0)<256){for(U=0;U<A;U+=1)if(_<<=1,X===L-1)X=0,M.push(R(_)),_=0;else X+=1;K=W.charCodeAt(0);for(U=0;U<8;U+=1){if(_=_<<1|K&1,X===L-1)X=0,M.push(R(_)),_=0;else X+=1;K>>=1}}else{K=1;for(U=0;U<A;U+=1){if(_=_<<1|K,X===L-1)X=0,M.push(R(_)),_=0;else X+=1;K=0}K=W.charCodeAt(0);for(U=0;U<16;U+=1){if(_=_<<1|K&1,X===L-1)X=0,M.push(R(_)),_=0;else X+=1;K>>=1}}if(H-=1,H===0)H=Math.pow(2,A),A+=1;delete I[W]}else{K=y[W];for(U=0;U<A;U+=1){if(_=_<<1|K&1,X===L-1)X=0,M.push(R(_)),_=0;else X+=1;K>>=1}}if(H-=1,H===0)H=Math.pow(2,A),A+=1}K=2;for(U=0;U<A;U+=1){if(_=_<<1|K&1,X===L-1)X=0,M.push(R(_)),_=0;else X+=1;K>>=1}while(!0){if(_<<=1,X===L-1){M.push(R(_));break}X+=1}return M.join("")}function Q(j,L,R){let U=[],K,y=4,I=4,f=3,p="",W=[],H,S,A,M,_,X={val:R(0),position:L,index:1};if(X.val===void 0)return null;for(let V=0;V<3;V+=1)U[V]=V;H=0,A=Math.pow(2,2),M=1;while(M!==A){if(S=X.val&X.position,X.position>>=1,X.position===0)X.position=L,X.val=R(X.index++);H|=(S>0?1:0)*M,M<<=1}switch(K=H){case 0:{H=0,A=Math.pow(2,8),M=1;while(M!==A){if(S=X.val&X.position,X.position>>=1,X.position===0)X.position=L,X.val=R(X.index++);H|=(S>0?1:0)*M,M<<=1}_=String.fromCharCode(H);break}case 1:{H=0,A=Math.pow(2,16),M=1;while(M!==A){if(S=X.val&X.position,X.position>>=1,X.position===0)X.position=L,X.val=R(X.index++);H|=(S>0?1:0)*M,M<<=1}_=String.fromCharCode(H);break}case 2:return"";default:_="";break}U[3]=_;let D=_;W.push(_);while(!0){if(X.index>j)return"";H=0,A=Math.pow(2,f),M=1;while(M!==A){if(S=X.val&X.position,X.position>>=1,X.position===0)X.position=L,X.val=R(X.index++);H|=(S>0?1:0)*M,M<<=1}switch(K=H){case 0:{H=0,A=Math.pow(2,8),M=1;while(M!==A){if(S=X.val&X.position,X.position>>=1,X.position===0)X.position=L,X.val=R(X.index++);H|=(S>0?1:0)*M,M<<=1}U[I]=String.fromCharCode(H),I+=1,K=I-1,y-=1;break}case 1:{H=0,A=Math.pow(2,16),M=1;while(M!==A){if(S=X.val&X.position,X.position>>=1,X.position===0)X.position=L,X.val=R(X.index++);H|=(S>0?1:0)*M,M<<=1}U[I]=String.fromCharCode(H),I+=1,K=I-1,y-=1;break}case 2:return W.join("");default:break}if(y===0)y=Math.pow(2,f),f+=1;let V;if(U[K])V=U[K];else if(K===I)V=D+D.charAt(0);else return null;if(W.push(V),U[I]=D+V.charAt(0),I+=1,y-=1,D=V,y===0)y=Math.pow(2,f),f+=1}}function Y(j){if(j==null)return"";return O(j,6,(L)=>"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$".charAt(L))}function Z(j){if(j==null)return"";if(j==="")return null;let L=j.replace(/ /g,"+");return Q(L.length,32,(R)=>J("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",L.charAt(R)))}return{encode(j){return Y(j)},decode(j){return Z(j)}}}var kq=`# dotfun Field Kit

Welcome to the **dotfun markdown studio**, your rapid space for shipping content, creative, and campaign notes in the dotfun house style.

---

## Why dotfun wins

- Human-first, unstoppable support that keeps partners in motion[^human-first]
- Transparent dashes: no smoke, no mirrors, just accountable growth[^transparent]
- We always **run good**, *look good*, and ~~feel average~~ feel good

> “Great marketing is equal parts rigor and play. dotfun keeps both on the table.”
>
> > Nested quotes let you surface creative direction alongside data calls.

## Plays & rituals

1. Run Good — align strategy with measurable revenue lift
2. Look Good — tell the story with thumb-stopping creative
3. Feel Good — nurture teams, founders, and audiences with human energy

- [x] Kickoff brief captured in Notion
- [ ] Post-launch retro scheduled
- Inline autolinks keep collaboration fast: <https://dotfun.co>

## Code snippets & ops

\`\`\`js
const lifecycle = ['Run Good', 'Look Good', 'Feel Good'];

export function dotfunPulse(team) {
  return lifecycle.map(phase => \`\${team} → \${phase}\`);
}
\`\`\`

\`\`\`bash
# Clone the playbook and start locally
git clone https://github.com/dotfunhq/marketing-os.git
cd marketing-os
npm install && npm run dev
\`\`\`

## Palette cheatsheet

| Tone            |   Hex    | Energy                                |
| :-------------- | :------: | ------------------------------------- |
| Run Good Red    | #FF4A2F  | Primary topspin for CTAs + headlines  |
| Neutral Sand    | #F6EEDC  | Background canvas for every story     |
| Accent Ink      | #1C1A15  | High-contrast copy + frames           |
| Highlight Peach | #FFB156  | Warm pops for data points + badges    |

## Media drop

![dotfun collage with gradient lighting](https://dummyimage.com/880x240/120d2e/ffffff&text=dotfun+creative)

---

## Callouts & embeds

<aside>
  <strong>Play nice with partners:</strong> dotfun pairs human energy with automation so every brief ships faster.
</aside>

Footnotes live here:

[^human-first]: dotfun leads with “Human-first, unstoppable support” across its service model.
[^transparent]: dotfun promises “No smoke. No mirrors. Just performance marketing that works.”`,hG=`
  <h2>Signal cadence</h2>
  <p>
    Tune typography, spacing, and accents to preview exactly how your exports will read.
    <strong>Headlines</strong>, <em>emphasis</em>, and <a href="https://dotfun.co">links</a>
    all respond instantly.
  </p>
  <ul>
    <li><input type="checkbox" checked /> Kickoff brief approved</li>
    <li><input type="checkbox" /> Post-launch retro scheduled</li>
  </ul>
  <blockquote>
    “Keep the preview tight—content should feel premium in every export.”
  </blockquote>
  <pre><code class="language-js">const palette = ['accent', 'muted', 'surface'];
const headline = 'Run Good';
console.log(\`\${headline} → \${palette[0]}\`);</code></pre>
  <table>
    <thead>
      <tr>
        <th>Element</th>
        <th>Role</th>
      </tr>
    </thead>
    <tbody>
      <tr>
        <td>Headings</td>
        <td>Frame the narrative arc</td>
      </tr>
      <tr>
        <td>Accent</td>
        <td>Guide the reader’s eye</td>
      </tr>
    </tbody>
  </table>
`,Yq={sora:"'Sora','Inter',system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif",inter:"'Inter','Sora',system-ui,-apple-system,BlinkMacSystemFont,'Segoe UI',sans-serif",system:"-apple-system,BlinkMacSystemFont,'Segoe UI','Helvetica Neue',sans-serif",lora:"'Lora','Georgia','Times New Roman',serif"},bG="'IBM Plex Mono','SFMono-Regular',Menlo,monospace",wq={sora:"Sora — dotfun default",inter:"Inter — versatile sans",system:"System UI — platform native",lora:"Lora — editorial serif"},Rq={sora:Yq.sora,match:null,lora:"'Lora','Georgia','Times New Roman',serif"},Dq={sora:"Sora Display",match:"Matches body",lora:"Editorial Serif"},zq={500:"Medium",600:"Semibold",700:"Bold"},dq={system(q){return{codeInlineBg:q.inlineBg,codeInlineColor:q.inlineColor,codeBlockBg:q.blockBg,codeBlockBorder:q.blockBorder,codeBadgeBg:q.badgeBg,codeBadgeText:q.badgeText,codeBlockText:q.text,hlKeyword:q.hlKeyword,hlString:q.hlString,hlTitle:q.hlTitle,hlNumber:q.hlNumber,hlComment:q.hlComment,tableBorder:q.tableBorder,tableHeaderBg:q.tableHeaderBg,tableRowEven:q.tableRowEven}},pastel(q){let{accent:G,text:J,background:O}=q;return{codeInlineBg:E(G,0.18,q.inlineBg),codeInlineColor:z(G,J,0.35)||q.inlineColor,codeBlockBg:z(O,G,0.12)||q.blockBg,codeBlockBorder:E(G,0.32,q.blockBorder),codeBadgeBg:E(G,0.22,q.badgeBg),codeBadgeText:J,codeBlockText:J,hlKeyword:G,hlString:z(G,"#2ca659",0.5)||q.hlString,hlTitle:z(G,"#9b4dff",0.42)||q.hlTitle,hlNumber:z(G,"#d97706",0.45)||q.hlNumber,hlComment:z(J,O,0.6)||q.hlComment,tableBorder:z(J,O,0.82)||q.tableBorder,tableHeaderBg:E(G,0.18,q.tableHeaderBg),tableRowEven:E(G,0.1,q.tableRowEven)}},midnight(q){let{accent:G,text:J,background:O}=q,Q=z(O,"#121827",0.6)||"#1b2335",Y=z(G,"#2d1b24",0.4)||"#3a2733",Z=z("#f7f5ff","#e9edf5",0.5)||"#f1f5f9";return{codeInlineBg:E(G,0.22,q.inlineBg),codeInlineColor:z(G,Z,0.5)||Z,codeBlockBg:Q,codeBlockBorder:E(z(G,Q,0.4)||Q,0.6,q.blockBorder),codeBadgeBg:E(Y,0.65,q.badgeBg),codeBadgeText:Z,codeBlockText:Z,hlKeyword:z(G,"#ffd166",0.5)||Z,hlString:z("#8efac6",G,0.35)||Z,hlTitle:z("#c1b4ff",G,0.4)||Z,hlNumber:z("#f9a46c",G,0.4)||Z,hlComment:z(Z,Q,0.4)||z(J,Q,0.5)||Z,tableBorder:E(z(Z,Q,0.55)||Q,0.55,q.tableBorder),tableHeaderBg:E(z(G,Q,0.3)||Q,0.5,q.tableHeaderBg),tableRowEven:E(z(G,"#1a1f2d",0.35)||"#1f2432",0.38,q.tableRowEven)}},mint(q){let{accent:G,text:J,background:O}=q,Q=z(G,"#00b894",0.4)||G;return{codeInlineBg:E(Q,0.2,q.inlineBg),codeInlineColor:z(Q,"#064e3b",0.25)||q.inlineColor,codeBlockBg:z(O,"#e6fffa",0.22)||q.blockBg,codeBlockBorder:E(Q,0.28,q.blockBorder),codeBadgeBg:E(Q,0.24,q.badgeBg),codeBadgeText:z(J,"#053d2f",0.6)||q.badgeText,codeBlockText:z(J,"#022d20",0.5)||q.text,hlKeyword:z(Q,"#0ea5e9",0.32)||q.hlKeyword,hlString:z("#22c55e",Q,0.5)||q.hlString,hlTitle:z("#6366f1",Q,0.35)||q.hlTitle,hlNumber:z("#f97316",Q,0.35)||q.hlNumber,hlComment:z(J,O,0.62)||q.hlComment,tableBorder:z(J,O,0.88)||q.tableBorder,tableHeaderBg:E(Q,0.2,q.tableHeaderBg),tableRowEven:E(Q,0.12,q.tableRowEven)}}},T={fontFamily:"sora",headingFont:"sora",headingWeight:"600",textScale:1,lineHeight:1.75,contentWidth:70,paragraphSpacing:1.1,accentColor:"",backgroundColor:"",textColor:"",codeTheme:"system"},gG=Object.keys(T),mG={textScale:{min:0.9,max:1.2,precision:2},lineHeight:{min:1.4,max:2,precision:2},contentWidth:{min:60,max:90,precision:0},paragraphSpacing:{min:0.8,max:1.6,precision:2}},xq=new Set(Object.keys(Yq)),lq=new Set(Object.keys(Rq)),Fq=new Set(Object.keys(zq)),Nq=new Set(Object.keys(dq)),$={...T},iq=null,Gq=null,uG=320,kG='button, [href], input, select, textarea, [tabindex]:not([tabindex="-1"])';function i(q,G,J,O){let Q=Number(q);if(Number.isNaN(Q))return O;return Math.min(Math.max(Q,G),J)}function dG(q,G,J){let{min:O,max:Q,precision:Y}=G,Z=i(q,O,Q,J);if(typeof Y!=="number")return Z;let j=10**Y;return Math.round(Z*j)/j}function r(q){if(!q)return null;let G=q.trim();if(!G)return null;if(G.startsWith("#")){let O=G.slice(1);if(O.length===3){let Q=parseInt(O[0]+O[0],16),Y=parseInt(O[1]+O[1],16),Z=parseInt(O[2]+O[2],16);if([Q,Y,Z].some((j)=>Number.isNaN(j)))return null;return{r:Q,g:Y,b:Z,a:1}}if(O.length===6||O.length===8){let Q=parseInt(O.substring(0,2),16),Y=parseInt(O.substring(2,4),16),Z=parseInt(O.substring(4,6),16);if([Q,Y,Z].some((j)=>Number.isNaN(j)))return null;if(O.length===8){let j=parseInt(O.substring(6,8),16);return{r:Q,g:Y,b:Z,a:Math.round(j/255*1000)/1000}}return{r:Q,g:Y,b:Z,a:1}}return null}let J=G.match(/^rgba?\(([^)]+)\)$/i);if(J){let O=J[1].split(",").map((L)=>L.trim());if(O.length<3)return null;let Q=Number(O[0]),Y=Number(O[1]),Z=Number(O[2]);if([Q,Y,Z].some((L)=>Number.isNaN(L)))return null;let j=O.length>3?Number(O[3]):1;return{r:Math.min(Math.max(Math.round(Q),0),255),g:Math.min(Math.max(Math.round(Y),0),255),b:Math.min(Math.max(Math.round(Z),0),255),a:Number.isNaN(j)?1:Math.min(Math.max(j,0),1)}}return null}function Jq(q){let G=Math.min(Math.max(q,0),1);if(G===0||G===1)return String(G);return G.toFixed(3).replace(/0+$/,"").replace(/\.$/,"")}function E(q,G,J){let O=r(q)||(J?r(J):null);if(!O)return J||q;return`rgba(${O.r}, ${O.g}, ${O.b}, ${Jq(G)})`}function z(q,G,J){let O=r(q),Q=r(G);if(!O&&!Q)return null;if(!O)return`rgba(${Q.r}, ${Q.g}, ${Q.b}, ${Jq(Q.a)})`;if(!Q)return`rgba(${O.r}, ${O.g}, ${O.b}, ${Jq(O.a)})`;let Y=Math.min(Math.max(J,0),1),Z=(L,R)=>Math.round(L+(R-L)*Y),j=O.a+(Q.a-O.a)*Y;return`rgba(${Z(O.r,Q.r)}, ${Z(O.g,Q.g)}, ${Z(O.b,Q.b)}, ${Jq(j)})`}function xG(q){return Yq[q]||Yq[T.fontFamily]}function lG(q,G){if(q==="match")return G;return Rq[q]||Rq[T.headingFont]||G}function m(q){if(typeof q!=="string")return"";let G=q.trim();return/^#[0-9a-fA-F]{6}$/.test(G)?G.toUpperCase():""}function iG(q,G){if(!q)return m(G)||"#FF4A2F";let J=r(q);if(!J)return m(G)||"#FF4A2F";let O=(Q)=>Q.toString(16).padStart(2,"0");return`#${O(J.r)}${O(J.g)}${O(J.b)}`.toUpperCase()}function Hq(q){let G=q&&typeof q==="object"?{...T,...q}:{...T};if(!xq.has(G.fontFamily))G.fontFamily=T.fontFamily;if(!lq.has(G.headingFont))G.headingFont=T.headingFont;if(Fq.has(String(G.headingWeight)))G.headingWeight=String(G.headingWeight);else G.headingWeight=T.headingWeight;if(!Nq.has(G.codeTheme))G.codeTheme=T.codeTheme;return Object.entries(mG).forEach(([J,O])=>{G[J]=dG(G[J],O,T[J])}),G.accentColor=m(G.accentColor),G.backgroundColor=m(G.backgroundColor),G.textColor=m(G.textColor),G}function vq(q,G=2){let J=Number(q);if(Number.isNaN(J))return"";return J.toFixed(G).replace(/\.?0+$/,"")}function F(q,G,J){let O=q.getPropertyValue(G);if(O&&O.trim())return O.trim();return J}function sG(q){switch(q){case"fontFamily":return wq[$.fontFamily]||wq[T.fontFamily];case"headingFont":return Dq[$.headingFont]||Dq[T.headingFont];case"headingWeight":return zq[$.headingWeight]||zq[T.headingWeight];case"textScale":return`${Math.round($.textScale*100)}%`;case"lineHeight":return vq($.lineHeight,2);case"contentWidth":return`${Math.round($.contentWidth)} ch`;case"paragraphSpacing":return`${vq($.paragraphSpacing,2)} rem`;default:return""}}function sq(){return iq}function rG({textColor:q,borderColor:G,accentColor:J}){let O=q&&q.trim()?q.trim():"#4b4237",Q=G&&G.trim()?G.trim():"rgba(28, 26, 21, 0.14)",Y=J&&J.trim()?J.trim():"#ff4a2f";return`
<p class="export-attribution" style="margin-top:2.5rem;padding-top:1.5rem;font-size:0.92rem;color:${O};border-top:1px solid ${Q};">Built with <a href="https://dotfun.co/tools/markdown-studio" target="_blank" rel="noopener" style="font-weight:600;text-decoration:none;color:${Y};">dotfun Markdown Studio</a>.</p>`}function Iq(q){if(!w)return null;let G=getComputedStyle(w),O=(w.dataset.theme||"light").toLowerCase()==="dark",Q=F(G,"--accent","#FF4A2F"),Y=F(G,"--text","#1C1A15"),Z=F(G,"--surface","#FFF8EB"),j=F(G,"--surface-alt",Z),L=F(G,"--muted","rgba(28, 26, 21, 0.68)"),R=F(G,"--accent-soft",E(Q,0.14)),U=F(G,"--preview-accent-shadow",E(Q,O?0.28:0.25)),K=F(G,"--code-inline-bg","rgba(31, 36, 48, 0.1)"),y=F(G,"--code-inline-color","#0C7C3F"),I=F(G,"--code-block-bg","#EEF2FF"),f=F(G,"--code-block-border","rgba(39, 94, 254, 0.16)"),p=F(G,"--code-badge-bg","rgba(39, 94, 254, 0.12)"),W=F(G,"--code-badge-text",Y),H=F(G,"--hljs-keyword",Q),S=F(G,"--hljs-string","#2CA659"),A=F(G,"--hljs-title","#9B4DFF"),M=F(G,"--hljs-number","#D97706"),_=F(G,"--hljs-comment",z(Y,Z,0.55)||Y),X=F(G,"--table-border",E(z(Y,Z,0.8)||Y,O?0.32:0.24)),D=F(G,"--table-header-bg",E(Q,O?0.18:0.12)),V=F(G,"--table-row-even",E(Q,O?0.16:0.08)),Tq=F(G,"--preview-checkbox-border",O?"rgba(255, 224, 196, 0.6)":"rgba(28, 26, 21, 0.5)"),QG=F(G,"--font-mono",bG),e=q.accentColor||Q,d=q.textColor||Y,x=q.backgroundColor||Z,Pq=j;if(q.backgroundColor)Pq=z(x,O?"#ffffff":"#000000",O?0.12:0.08)||j;let XG=E(e,O?0.24:0.16,R),YG=E(e,O?0.32:0.25,U),ZG=q.textColor||q.backgroundColor?z(d,x,O?0.72:0.38)||L:L,_G={accent:e,text:d,background:x,inlineBg:K,inlineColor:y,blockBg:I,blockBorder:f,badgeBg:p,badgeText:W,hlKeyword:H,hlString:S,hlTitle:A,hlNumber:M,hlComment:_,tableBorder:X,tableHeaderBg:D,tableRowEven:V},$G=Nq.has(q.codeTheme)?q.codeTheme:T.codeTheme,C=dq[$G](_G)||{},jG=C.tableBorder||X,UG=C.tableHeaderBg||D,LG=C.tableRowEven||V,MG=C.codeInlineBg||K,KG=C.codeInlineColor||y,RG=C.codeBlockBg||I,zG=C.codeBlockBorder||f,HG=C.codeBadgeBg||p,AG=C.codeBadgeText||W,EG=C.codeBlockText||d,WG=C.hlKeyword||H,FG=C.hlString||S,NG=C.hlTitle||A,IG=C.hlNumber||M,SG=C.hlComment||_,TG=E(z(d,x,O?0.68:0.42)||d,O?0.68:0.5,Tq)||Tq,yq=xG(q.fontFamily),PG=lG(q.headingFont,yq),yG=Fq.has(String(q.headingWeight))?String(q.headingWeight):T.headingWeight;return{fontSans:yq,headingFont:PG,headingWeight:yG,monoFont:QG,fontScale:q.textScale,lineHeight:q.lineHeight,paragraphSpacing:`${q.paragraphSpacing}rem`,contentWidth:`${q.contentWidth}ch`,accent:e,accentSoft:XG,accentShadow:YG,text:d,muted:ZG,background:x,surfaceAlt:Pq,tableBorder:jG,tableHeaderBg:UG,tableRowEven:LG,codeInlineBg:MG,codeInlineColor:KG,codeBlockBg:RG,codeBlockBorder:zG,codeBadgeBg:HG,codeBadgeText:AG,codeBlockText:EG,hlKeyword:WG,hlString:FG,hlTitle:NG,hlNumber:IG,hlComment:SG,checkboxBorder:TG}}function cG(q,G){let J=[];if(w)J.push(w);if(N)J.push(N);if(J.length===0)return;J.forEach((O)=>{if(!O)return;if(G===void 0||G===null||G==="")O.style.removeProperty(q);else O.style.setProperty(q,G)})}var oG=[["fontSans","--preview-font-sans"],["headingFont","--preview-heading-font"],["headingWeight","--preview-heading-weight"],["fontScale","--preview-font-scale",(q)=>String(q)],["lineHeight","--preview-line-height",(q)=>String(q)],["paragraphSpacing","--preview-paragraph-spacing"],["contentWidth","--preview-content-width"],["text","--preview-text"],["muted","--preview-muted"],["background","--preview-surface"],["surfaceAlt","--preview-surface-alt"],["accent","--preview-accent"],["accentSoft","--preview-accent-soft"],["accentShadow","--preview-accent-shadow"],["codeInlineBg","--preview-code-inline-bg"],["codeInlineColor","--preview-code-inline-color"],["codeBlockBg","--preview-code-block-bg"],["codeBlockBorder","--preview-code-block-border"],["codeBadgeBg","--preview-code-badge-bg"],["codeBadgeText","--preview-code-badge-text"],["codeBlockText","--preview-code-block-text"],["tableBorder","--preview-table-border"],["tableHeaderBg","--preview-table-header-bg"],["tableRowEven","--preview-table-row-even"],["hlKeyword","--preview-hljs-keyword"],["hlString","--preview-hljs-string"],["hlTitle","--preview-hljs-title"],["hlNumber","--preview-hljs-number"],["hlComment","--preview-hljs-comment"],["checkboxBorder","--preview-checkbox-border"]];function nG(q){oG.forEach(([G,J,O])=>{if(!(G in q))return;let Q=q[G],Y=typeof O==="function"?O(Q,q):Q;cG(J,Y)})}function o(q=$){let G=Iq(q);if(!G)return;iq=G,nG(G),Zq(),rq()}function jq(){$q(v.SETTINGS,$,{serialize:(q)=>JSON.stringify(q),onErrorMessage:"Unable to persist preview settings"})}function aG(q=null){if(q&&typeof q==="object"){$=Hq(q);return}let G=c(v.SETTINGS,{parse:(J)=>JSON.parse(J),fallback:null,onErrorMessage:"Unable to read preview settings"});$=Hq(G)}function Zq(){if(!g)return;g.querySelectorAll("[data-display-for]").forEach((G)=>{let J=G.getAttribute("data-display-for");if(!J)return;let O=sG(J);if(O)G.textContent=O})}function n(q=!1){if(!u)return;if(!q&&N&&N.hidden)return;u.innerHTML=hG.trim(),u.scrollTop=0,u.querySelectorAll("pre code").forEach((J)=>{hljs.highlightElement(J),GG(J)})}function rq(){n()}function pq(q){let G=q.target;if(!(G instanceof HTMLInputElement)||G.type!=="checkbox")return;if(q.type==="keydown"&&![" ","Spacebar","Enter"].includes(q.key))return;q.preventDefault()}function Sq(){if(!g)return;let q=sq()||Iq($);g.querySelectorAll("[data-setting]").forEach((J)=>{let O=J.getAttribute("data-setting");if(!O||!(O in $))return;let Q=$[O];if(J instanceof HTMLInputElement)if(J.type==="range"||J.type==="number")J.value=String(Q);else if(J.type==="color"){let Y="#FF4A2F";if(q){if(O==="accentColor")Y=q.accent;if(O==="backgroundColor")Y=q.background;if(O==="textColor")Y=q.text}J.value=iG(Q||Y,Y)}else J.value=String(Q);else if(J instanceof HTMLSelectElement)J.value=String(Q)}),Zq()}function eG(q,G){switch(q){case"fontFamily":if(!xq.has(G))return!1;if($.fontFamily===G)return!1;return $.fontFamily=G,!0;case"headingFont":if(!lq.has(G))return!1;if($.headingFont===G)return!1;return $.headingFont=G,!0;case"headingWeight":{let J=String(G);if(!Fq.has(J)||$.headingWeight===J)return!1;return $.headingWeight=J,!0}case"codeTheme":if(!Nq.has(G)||$.codeTheme===G)return!1;return $.codeTheme=G,!0;case"textScale":{let J=i(G,0.9,1.2,$.textScale);if($.textScale===J)return!1;return $.textScale=J,!0}case"lineHeight":{let J=Math.round(i(G,1.4,2,$.lineHeight)*100)/100;if($.lineHeight===J)return!1;return $.lineHeight=J,!0}case"contentWidth":{let J=Math.round(i(G,60,90,$.contentWidth));if($.contentWidth===J)return!1;return $.contentWidth=J,!0}case"paragraphSpacing":{let J=Math.round(i(G,0.8,1.6,$.paragraphSpacing)*100)/100;if($.paragraphSpacing===J)return!1;return $.paragraphSpacing=J,!0}case"accentColor":{let J=m(G);if($.accentColor===J)return!1;return $.accentColor=J,!0}case"backgroundColor":{let J=m(G);if($.backgroundColor===J)return!1;return $.backgroundColor=J,!0}case"textColor":{let J=m(G);if($.textColor===J)return!1;return $.textColor=J,!0}default:return!1}}function hq(q){let G=q.target;if(!(G instanceof HTMLInputElement)&&!(G instanceof HTMLSelectElement))return;let J=G.dataset.setting;if(!J||!(J in $))return;let O=G.type==="color"?G.value:G.value;if(!eG(J,O)){Zq();return}jq(),o($),Zq(),a()}function tG(q){if(!(q in $))return;$[q]=T[q],jq(),o($),Sq(),n(!0),a()}function qJ(){$={...T},jq(),o($),Sq(),n(!0),a()}function cq(q){if(!N||N.hidden)return;if(q.key==="Escape"){q.preventDefault(),Aq();return}if(q.key!=="Tab")return;let G=N.querySelectorAll(kG);if(!G.length)return;let J=Array.from(G).filter((Z)=>!Z.hasAttribute("disabled"));if(!J.length)return;let O=J[0],Q=J[J.length-1],Y=document.activeElement;if(q.shiftKey){if(Y===O||!N.contains(Y))q.preventDefault(),Q.focus();return}if(Y===Q)q.preventDefault(),O.focus()}function GJ(){if(!N)return;if(!N.hidden&&N.classList.contains("is-visible"))return;if(Sq(),n(!0),Gq=document.activeElement instanceof HTMLElement?document.activeElement:null,N.hidden=!1,requestAnimationFrame(()=>{N.classList.add("is-visible")}),document.body.classList.add("is-settings-open"),b)b.setAttribute("aria-expanded","true");document.addEventListener("keydown",cq);let q=N.querySelector("[data-setting]"),G=q instanceof HTMLElement?q:Oq instanceof HTMLElement?Oq:null;if(G)setTimeout(()=>G.focus(),30)}function Aq(){if(!N||N.hidden)return;if(N.classList.remove("is-visible"),document.body.classList.remove("is-settings-open"),b)b.setAttribute("aria-expanded","false");if(document.removeEventListener("keydown",cq),setTimeout(()=>{if(!N.classList.contains("is-visible"))N.hidden=!0},uG),Gq&&typeof Gq.focus==="function")Gq.focus()}function JJ(){if(b)b.setAttribute("aria-haspopup","dialog"),b.setAttribute("aria-expanded","false"),b.addEventListener("click",GJ);if(Oq)Oq.addEventListener("click",Aq);if(Vq)Vq.addEventListener("click",Aq);if(g)g.addEventListener("input",hq),g.addEventListener("change",hq),g.querySelectorAll("[data-settings-reset]").forEach((G)=>{G.addEventListener("click",()=>{let J=G.getAttribute("data-settings-reset");if(!J)return;tG(J)})});if(fq)fq.addEventListener("click",qJ);if(n(!0),u)u.addEventListener("click",pq),u.addEventListener("keydown",pq)}function OJ(q,G="fragment"){let J=q.fontScale||1,O=[],Q=G==="document";if(Q)O.push(`body { margin: 0; padding: 0; font-family: ${q.fontSans}; color: ${q.text}; line-height: ${q.lineHeight}; }`);let Y=Q?"":`  background: ${q.background};
`;return O.push(`.dotfun-markdown {
  font-family: ${q.fontSans};
  color: ${q.text};
${Y}  line-height: ${q.lineHeight};
  letter-spacing: 0.01em;
  max-width: ${q.contentWidth};
  margin: 0 auto;
  padding: 0;
}
.dotfun-markdown > *:first-child {
  margin-top: 0;
}
.dotfun-markdown > * {
  max-width: ${q.contentWidth};
  margin-left: auto;
  margin-right: auto;
}
.dotfun-markdown h1,
.dotfun-markdown h2,
.dotfun-markdown h3,
.dotfun-markdown h4,
.dotfun-markdown h5,
.dotfun-markdown h6 {
  font-family: ${q.headingFont};
  font-weight: ${q.headingWeight};
  line-height: 1.2;
  margin: calc(2rem * ${J}) 0 calc(1rem * ${J});
}
.dotfun-markdown h1 {
  font-size: calc(clamp(2rem, 4vw, 2.6rem) * ${J});
  letter-spacing: -0.012em;
}
.dotfun-markdown h2 {
  font-size: calc(clamp(1.7rem, 3.4vw, 2.2rem) * ${J});
}
.dotfun-markdown h3 {
  font-size: calc(clamp(1.4rem, 2.8vw, 1.8rem) * ${J});
}
.dotfun-markdown p,
.dotfun-markdown ul,
.dotfun-markdown ol {
  font-size: calc(1.05rem * ${J});
}
.dotfun-markdown p {
  margin: calc(${q.paragraphSpacing} * ${J}) 0;
}
.dotfun-markdown ul,
.dotfun-markdown ol {
  margin: calc(1.2rem * ${J}) 0 calc(1.2rem * ${J}) 1.6rem;
  padding-left: 1.2rem;
}
.dotfun-markdown blockquote {
  margin: calc(1.8rem * ${J}) 0;
  padding: 1rem 1.5rem;
  border-left: 4px solid ${q.accent};
  background: ${q.accentSoft};
  box-shadow: inset 0 0 0 1px rgba(255, 255, 255, 0.12);
  font-style: italic;
}
.dotfun-markdown blockquote p {
  margin: 0;
}
.dotfun-markdown input[type='checkbox'] {
  appearance: none;
  width: 18px;
  height: 18px;
  margin-right: 0.6rem;
  border: 2px solid ${q.checkboxBorder};
  border-radius: 6px;
  display: inline-grid;
  place-content: center;
  vertical-align: middle;
  background: ${q.background};
  transition: background-color 0.2s ease, border-color 0.2s ease, box-shadow 0.2s ease;
  cursor: pointer;
}
.dotfun-markdown input[type='checkbox']:hover {
  border-color: ${q.accent};
}
.dotfun-markdown input[type='checkbox']:checked {
  background: ${q.accent};
  border-color: ${q.accent};
  box-shadow: 0 6px 14px ${q.accentShadow};
}
.dotfun-markdown input[type='checkbox']:checked::after {
  content: '✓';
  color: #fffdf8;
  font-size: 0.7rem;
  font-weight: 700;
}
.dotfun-markdown code {
  font-family: ${q.monoFont};
  font-size: calc(0.95rem * ${J});
  background: ${q.codeInlineBg};
  color: ${q.codeInlineColor};
  padding: 0.2em 0.45em;
  border-radius: 6px;
}
.dotfun-markdown pre {
  margin: calc(1.8rem * ${J}) 0;
  padding: 1.5rem;
  padding-top: 2.6rem;
  background: ${q.codeBlockBg};
  border: 1px solid ${q.codeBlockBorder};
  border-radius: 16px;
  overflow-x: auto;
  font-family: ${q.monoFont};
  font-size: calc(0.95rem * ${J});
  line-height: 1.6;
  position: relative;
}
.dotfun-markdown pre code {
  background: none;
  padding: 0;
  display: block;
}
.dotfun-markdown pre[data-lang]::before {
  content: attr(data-lang);
  position: absolute;
  top: 0.75rem;
  right: 1rem;
  padding: 0.3rem 0.75rem;
  font-size: 0.75rem;
  letter-spacing: 0.08em;
  text-transform: uppercase;
  border-radius: 999px;
  background: ${q.codeBadgeBg};
  color: ${q.codeBadgeText};
  font-family: ${q.headingFont};
}
.dotfun-markdown pre code.hljs {
  color: ${q.codeBlockText};
}
.dotfun-markdown .hljs-comment,
.dotfun-markdown .hljs-quote {
  color: ${q.hlComment};
  font-style: italic;
}
.dotfun-markdown .hljs-keyword,
.dotfun-markdown .hljs-selector-tag,
.dotfun-markdown .hljs-literal,
.dotfun-markdown .hljs-section,
.dotfun-markdown .hljs-link {
  color: ${q.hlKeyword};
  font-weight: 600;
}
.dotfun-markdown .hljs-string,
.dotfun-markdown .hljs-template-variable,
.dotfun-markdown .hljs-addition {
  color: ${q.hlString};
}
.dotfun-markdown .hljs-number,
.dotfun-markdown .hljs-attr,
.dotfun-markdown .hljs-attribute,
.dotfun-markdown .hljs-symbol,
.dotfun-markdown .hljs-built_in,
.dotfun-markdown .hljs-bullet {
  color: ${q.hlNumber};
}
.dotfun-markdown .hljs-title,
.dotfun-markdown .hljs-name,
.dotfun-markdown .hljs-type,
.dotfun-markdown .hljs-selector-id,
.dotfun-markdown .hljs-selector-class,
.dotfun-markdown .hljs-meta,
.dotfun-markdown .hljs-doctag,
.dotfun-markdown .hljs-template-tag {
  color: ${q.hlTitle};
}
.dotfun-markdown a {
  color: ${q.accent};
  text-decoration: none;
  font-weight: 600;
}
.dotfun-markdown a:hover,
.dotfun-markdown a:focus {
  text-decoration: underline;
}
.dotfun-markdown .footnote-ref {
  font-size: 0.75em;
  vertical-align: super;
}
.dotfun-markdown .footnote-ref a,
.dotfun-markdown .footnote-backref {
  color: ${q.accent};
  text-decoration: none;
  font-weight: 600;
}
.dotfun-markdown .footnote-backref:hover,
.dotfun-markdown .footnote-ref a:hover {
  text-decoration: underline;
}
.dotfun-markdown .footnotes {
  margin-top: 2.5rem;
  font-size: 0.9rem;
  color: ${q.muted};
}
.dotfun-markdown .footnotes hr {
  border: none;
  border-top: 1px solid ${q.tableBorder};
  margin-bottom: 1.5rem;
}
.dotfun-markdown .footnotes ol {
  margin: 0;
  padding-left: 1.5rem;
  display: grid;
  gap: 0.75rem;
}
.dotfun-markdown table {
  width: 100%;
  border-collapse: separate;
  border-spacing: 0;
  margin: calc(1.5rem * ${J}) 0;
  font-size: calc(0.95rem * ${J});
  border: 1px solid ${q.tableBorder};
  border-radius: 16px;
  overflow: hidden;
  background: ${q.background};
}
.dotfun-markdown th,
.dotfun-markdown td {
  padding: 0.75rem 1rem;
  text-align: left;
  border-right: 1px solid ${q.tableBorder};
  border-bottom: 1px solid ${q.tableBorder};
}
.dotfun-markdown th:last-child,
.dotfun-markdown td:last-child {
  border-right: none;
}
.dotfun-markdown tbody tr:last-child td {
  border-bottom: none;
}
.dotfun-markdown table thead {
  background: ${q.tableHeaderBg};
}
.dotfun-markdown table tbody tr:nth-child(even) {
  background: ${q.tableRowEven};
}
.dotfun-markdown img {
  max-width: 100%;
  border-radius: 16px;
  box-shadow: 0 12px 24px rgba(0, 0, 0, 0.12);
}
.dotfun-markdown .export-attribution {
  margin-top: calc(2.5rem * ${J});
  padding-top: 1.5rem;
  border-top: 1px solid ${q.tableBorder};
  font-size: 0.92rem;
  color: ${q.muted};
}
.dotfun-markdown .export-attribution a {
  color: ${q.accent};
  font-weight: 600;
  text-decoration: none;
}
.dotfun-markdown .export-attribution a:hover {
  text-decoration: underline;
}`),O.join(`

`)}function oq(q="fragment"){let G=sq()||Iq($);if(!G)return{htmlFragment:h.innerHTML,docHtml:h.innerHTML,plainText:h.textContent||"",tokens:null};let J=h.cloneNode(!0);J.removeAttribute("id");let O=document.createElement("section");O.className="dotfun-markdown",O.dataset.theme=w.dataset.theme||"light",O.innerHTML=J.innerHTML;let Q=rG({textColor:G.muted,borderColor:G.tableBorder,accentColor:G.accent});O.insertAdjacentHTML("beforeend",Q);let Y=OJ(G,q),Z=`<style>${Y}</style>${O.outerHTML}`,j=`<!DOCTYPE html><html><head><meta charset="utf-8"><style>${Y}</style></head><body>${O.outerHTML}</body></html>`,L=O.textContent||"";return{tokens:G,css:Y,htmlFragment:Z,docHtml:j,plainText:L}}async function QJ(){let q=oq("fragment");await navigator.clipboard.writeText(q.htmlFragment)}marked.setOptions({gfm:!0,breaks:!0,highlight(q,G){if(G&&hljs.getLanguage(G))return hljs.highlight(q,{language:G}).value;return hljs.highlightAuto(q).value}});function XJ(q){let G=q.split(/\r?\n/),J=[],O=[],Q=0;while(Q<G.length){let Y=G[Q],Z=Y.match(/^\[\^([^\]]+)\]:\s?(.*)$/);if(Z){let j=Z[1],L=Z[2]||"";Q+=1;while(Q<G.length){let R=G[Q];if(/^( {2,}|\t)/.test(R)){L+=`
`+R.replace(/^(?: {2,4}|\t)/,""),Q+=1;continue}if(R.trim()===""){let U=G[Q+1];if(U&&/^( {2,}|\t)/.test(U)){L+=`
`,Q+=1;continue}Q+=1}break}O.push({id:j,content:L.trim()});continue}J.push(Y),Q+=1}if(!O.length)return{body:q,footnotes:[]};return{body:J.join(`
`),footnotes:O}}function YJ(q){let{body:G,footnotes:J}=XJ(q);if(!J.length)return{markdown:q,footnotes:[]};let O=new Map;return J.forEach((Y,Z)=>{O.set(Y.id,Z+1)}),{markdown:G.replace(/\[\^([^\]]+)\]/g,(Y,Z)=>{let j=O.get(Z);if(!j)return Y;return`<sup id="fnref-${Z}" class="footnote-ref"><a href="#fn-${Z}">${j}</a></sup>`}),footnotes:J.map((Y,Z)=>({...Y,number:Z+1}))}}function ZJ(q){if(!q.length)return"";return`<section class="footnotes" aria-label="Footnotes"><hr /><ol>${q.map((J)=>{let O=document.createElement("div");O.innerHTML=marked.parse(J.content).trim();let Q=O.querySelectorAll("p"),Y=` <a href="#fnref-${J.id}" class="footnote-backref" aria-label="Back to content">↩︎</a>`;if(Q.length)Q[Q.length-1].insertAdjacentHTML("beforeend",Y);else O.insertAdjacentHTML("beforeend",`<p>${Y.trim()}</p>`);return`<li id="fn-${J.id}"><div class="footnote-content">${O.innerHTML}</div></li>`}).join("")}</ol></section>`}function _J(q){let G=/^(\s*[-*+]\s+|\s*\d+\.\s+)\[( |x|X)\].*$/gm,J=[],O;while((O=G.exec(q))!==null)J.push({start:O.index,end:G.lastIndex,text:O[0],checked:O[2].toLowerCase()==="x"});return J}function $J(){h.querySelectorAll('li input[type="checkbox"]').forEach((G,J)=>{let O=Wq[J];if(G.removeAttribute("disabled"),!O)return;G.dataset.taskIndex=String(J),G.checked=O.checked})}function nq(q){Wq=_J(q);let{markdown:G,footnotes:J}=YJ(q),O=marked.parse(G),Q=ZJ(J),Y=DOMPurify.sanitize(O+Q);h.innerHTML=Y,$J(),h.querySelectorAll("pre code").forEach((Z)=>{hljs.highlightElement(Z),GG(Z)}),rq()}function aq(q){let J=q.replace(/[`*_#>\-]/g," ").split(/\s+/).filter(Boolean).length;fG.textContent=J===1?"1 word":`${J} words`}function eq(q){$q(v.CONTENT,q,{onErrorMessage:"Unable to persist markdown content"})}function jJ(){let q=gG.reduce((G,J)=>{return G[J]=$[J],G},{});return{v:mq,t:w&&w.dataset.theme==="dark"?"dark":"light",c:P?P.value:"",s:q}}function tq(){try{let q=JSON.stringify(jJ());return uq.encode(q)}catch(q){return console.error("Unable to serialize share payload",q),null}}function UJ(q){if(!q)return null;try{let G=uq.decode(q);if(!G)return null;let J=JSON.parse(G);if(!J||typeof J!=="object")return null;return J}catch(G){return console.warn("Unable to decode share payload:",G),null}}function LJ(){if(typeof window==="undefined"||typeof window.location==="undefined")return null;try{let G=new URL(window.location.href).searchParams.get(Kq);if(!G)return null;let J=UJ(G);if(!J)return null;let O=J.t==="dark"?"dark":J.t==="light"?"light":null,Q=typeof J.c==="string"?J.c:"",Y=J.s&&typeof J.s==="object"?Hq(J.s):null;return{version:Number(J.v)||mq,theme:O,markdown:Q,settings:Y,encoded:G}}catch(q){return console.warn("Unable to parse shared state from URL:",q),null}}function qG(q){if(typeof window==="undefined"||typeof window.location==="undefined")return"";let G=new URL(window.location.href);if(q&&q.length)G.searchParams.set(Kq,q);else G.searchParams.delete(Kq);let J=G.toString();if(typeof window.history!=="undefined"&&typeof window.history.replaceState==="function")window.history.replaceState(null,"",J);return J}async function MJ(q){if(!q)return;if(navigator.clipboard&&typeof navigator.clipboard.writeText==="function"){await navigator.clipboard.writeText(q);return}KJ(q)}function KJ(q){if(typeof document==="undefined")throw new Error("Clipboard unavailable");let G=document.createElement("textarea");G.value=q,G.setAttribute("readonly",""),G.style.position="fixed",G.style.top="-9999px",G.style.opacity="0",document.body.appendChild(G),G.select(),G.setSelectionRange(0,G.value.length);let J=document.execCommand&&document.execCommand("copy");if(document.body.removeChild(G),!J)throw new Error("execCommand copy failed")}function RJ(){let q=tq();if(!q)return null;if(q===Xq)return q;return Xq=q,qG(q),q}function a(){if(Lq)return;Lq=!0;let q=()=>{Lq=!1,RJ()};if(typeof window!=="undefined"&&typeof window.requestAnimationFrame==="function")window.requestAnimationFrame(q);else if(typeof setTimeout==="function")setTimeout(q,0);else q()}function zJ(){let q=tq();if(!q)return null;return Xq=q,qG(q)}function HJ(q=null){let G;if(typeof q==="string")G=q;else{let J=c(v.CONTENT,{fallback:null,onErrorMessage:"Unable to read saved markdown"});G=typeof J==="string"&&J?J:kq}P.value=G,nq(G),aq(G)}function _q(q){let G=q==="dark"?"dark":"light";w.dataset.theme=G,document.body.dataset.theme=G,CG.textContent=G==="dark"?"Dark":"Light",$q(v.THEME,G,{onErrorMessage:"Unable to persist theme preference"}),o($),AJ(G),a()}function AJ(q){let G=q==="dark";if(Cq)Cq.disabled=G;if(Bq)Bq.disabled=!G}function EJ(q){if(!q)return"Code";return q.replace(/language-/i,"").replace(/[\W_]+/g," ").trim().replace(/\b\w/g,(G)=>G.toUpperCase())}function GG(q){let G=q.closest("pre");if(!G)return;let O=Array.from(q.classList).find((Y)=>Y.startsWith("language-"))||q.getAttribute("data-language")||q.result&&q.result.language&&`language-${q.result.language}`,Q=EJ(O);G.dataset.lang=Q}function WJ(q,G){let J=Wq[q];if(!J)return;let O=P.value,Q=O.slice(0,J.start),Y=O.slice(J.end),Z=J.text.replace(/\[( |x|X)\]/,G?"[x]":"[ ]"),j=Q+Z+Y,L=P.selectionStart,R=P.selectionEnd;Mq=!0,P.value=j,P.setSelectionRange(L,R),P.dispatchEvent(new Event("input")),Mq=!1}async function FJ(){let q=oq("document");if(navigator.clipboard&&typeof navigator.clipboard.write==="function"&&typeof ClipboardItem!=="undefined"){let G=new Blob([q.docHtml],{type:"text/html"}),J=new Blob([q.plainText],{type:"text/plain"});await navigator.clipboard.write([new ClipboardItem({"text/html":G,"text/plain":J})]);return}await navigator.clipboard.writeText(q.plainText)}function NJ(q=null){if(q==="light"||q==="dark"){_q(q);return}let G=c(v.THEME,{fallback:null,onErrorMessage:"Unable to read stored theme"}),J=typeof G==="string"&&G?G:null;if(!J)J=typeof window!=="undefined"&&typeof window.matchMedia==="function"&&window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light";_q(J)}P.addEventListener("input",(q)=>{let G=q.target.value;if(nq(G),aq(G),!Mq)eq(G);a()});BG.addEventListener("click",()=>{P.value=kq,P.dispatchEvent(new Event("input")),P.focus()});DG.addEventListener("click",()=>{let q=w.dataset.theme==="dark"?"light":"dark";_q(q)});VG.addEventListener("change",(q)=>{let[G]=q.target.files;if(!G)return;let J=new FileReader;J.onload=(O)=>{let Q=String(O.target.result);P.value=Q,P.dispatchEvent(new Event("input"))},J.readAsText(G),q.target.value=""});wG.addEventListener("click",()=>{let q=new Blob([P.value],{type:"text/markdown"}),G=URL.createObjectURL(q),J=document.createElement("a"),O=new Date().toISOString().replace(/[:.]/g,"-");J.href=G,J.download=`dotfun-studio-${O}.md`,document.body.appendChild(J),J.click(),document.body.removeChild(J),URL.revokeObjectURL(G)});Uq.addEventListener("click",async()=>{try{await QJ(),k(Uq,"Copied!")}catch(q){console.error("Clipboard copy failed",q),k(Uq,"Copy failed")}});if(l)l.addEventListener("click",async()=>{let q=zJ();if(!q){k(l,"Share failed");return}try{await MJ(q),k(l,"Link copied!")}catch(G){console.error("Share link failed",G),k(l,"Share failed")}});if(t)t.addEventListener("click",async()=>{try{await FJ(),k(t,"Copied!")}catch(q){console.error("Docs copy failed",q),k(t,"Copy failed")}});h.addEventListener("change",(q)=>{let G=q.target;if(!(G instanceof HTMLInputElement)||G.type!=="checkbox")return;let J=Number(G.dataset.taskIndex??"-1");if(Number.isNaN(J)||J<0)return;WJ(J,G.checked)});function k(q,G){let J=q.textContent;q.textContent=G,q.classList.add("is-active"),setTimeout(()=>{q.textContent=J,q.classList.remove("is-active")},1400)}var B=LJ(),JG=B&&B.settings&&typeof B.settings==="object"?B.settings:null,IJ=B&&(B.theme==="light"||B.theme==="dark")?B.theme:null,Eq=B&&typeof B.markdown==="string"?B.markdown:null;if(B&&typeof B.encoded==="string")Xq=B.encoded;aG(JG);NJ(IJ);o($);if(JG)jq();HJ(Eq);if(Eq!==null)eq(Eq);JJ();var qq=window.matchMedia("(prefers-color-scheme: dark)"),bq=(q)=>{if(!c(v.THEME,{fallback:null}))_q(q.matches?"dark":"light")};if(typeof qq.addEventListener==="function")qq.addEventListener("change",bq);else if(typeof qq.addListener==="function")qq.addListener(bq);["dragenter","dragover"].forEach((q)=>{document.addEventListener(q,(G)=>{if(!G.dataTransfer)return;if(Array.from(G.dataTransfer.types).includes("Files"))G.preventDefault(),w.classList.add("is-dragging")})});["dragleave","drop","dragend"].forEach((q)=>{document.addEventListener(q,(G)=>{if(G.type==="drop")G.preventDefault(),SJ(G);w.classList.remove("is-dragging")})});function SJ(q){let G=Array.from(q.dataTransfer.files).filter((O)=>/\.(md|markdown|txt)$/i.test(O.name));if(!G.length)return;let J=new FileReader;J.onload=(O)=>{let Q=String(O.target.result);P.value=Q,P.dispatchEvent(new Event("input"))},J.readAsText(G[0])}var OG=document.createElement("style");OG.textContent=`
  .app.is-dragging::after {
    content: 'Drop markdown file to import';
    position: fixed;
    inset: min(20vh, 120px) 10vw;
    border-radius: 24px;
    background: rgba(39, 94, 254, 0.1);
    border: 2px dashed rgba(39, 94, 254, 0.4);
    color: var(--accent);
    font-family: var(--font-sans);
    font-size: clamp(1.4rem, 3vw, 2rem);
    display: grid;
    place-items: center;
    pointer-events: none;
    z-index: 50;
    box-shadow: 0 20px 40px rgba(39, 94, 254, 0.12);
    backdrop-filter: blur(10px);
  }
`;document.head.appendChild(OG);var s=document.getElementById("bookmark-callout"),gq=document.getElementById("dismiss-bookmark"),TJ=60000;function PJ(){if(c(v.BOOKMARK_DISMISSED,{fallback:"false",onErrorMessage:"Unable to check bookmark toast state"})==="true")return;setTimeout(()=>{if(s)s.classList.add("is-visible")},TJ)}function yJ(){if(!s)return;s.classList.remove("is-visible"),$q(v.BOOKMARK_DISMISSED,"true",{onErrorMessage:"Unable to save bookmark toast state"}),setTimeout(()=>{s.classList.add("is-hidden")},400)}if(gq)gq.addEventListener("click",yJ);PJ();
